# ุงููุดุงูู ุงูููุชุดูุฉ ูู ูุธุงู ุงููุดุชุฑูุงุช

## ููุฎุต ุชูููุฐู

ุชู ุงูุชุดุงู **8 ูุดุงูู** ุฃุซูุงุก ุงูุงุฎุชุจุงุฑุงุช:
- ๐ด **3 ูุดุงูู** ุญุฑุฌุฉ
- ๐ **2 ูุดุงูู** ูุชูุณุทุฉ
- ๐ก **3 ูุดุงูู** ููุฎูุถุฉ ุงูุฃููููุฉ

---

## ุงููุดุงูู ุงูุญุฑุฌุฉ ๐ด

### 1. ุนุฏู ุชูุงูู ุญูู `unit` ูู PurchaseOrderItem

**ุงููุตู:**
```
PurchaseOrderItem() got unexpected keyword arguments: 'unit'
```

**ุงููููุน:** `apps/purchases/models.py` - ูููุฐุฌ `PurchaseOrderItem`

**ุงูุชุฃุซูุฑ:**
- ูุง ูููู ุฅุถุงูุฉ ุจููุฏ ูุฃูุงูุฑ ุงูุดุฑุงุก ุจุฑูุฌูุงู
- ูุคุซุฑ ุนูู ุงูุงุฎุชุจุงุฑุงุช ูุงูุชูุงูู

**ุงูุญู ุงูููุชุฑุญ:**
1. ูุญุต ุงุณู ุงูุญูู ุงูุตุญูุญ ูู ุงููููุฐุฌ
2. ุชูุญูุฏ ุฃุณูุงุก ุงูุญููู ุนุจุฑ ุฌููุน ููุงุฐุฌ ุงูุจููุฏ

---

### 2. ุนูุงูุฉ requested_by ูู PurchaseRequest

**ุงููุตู:**
```
Cannot assign "<User: admin>": "PurchaseRequest.requested_by" must be a "Employee" instance.
```

**ุงููููุน:** `apps/purchases/models.py` - ูููุฐุฌ `PurchaseRequest`

**ุงูุชุฃุซูุฑ:**
- ูุง ูููู ุฅูุดุงุก ุทูุจ ุดุฑุงุก ุจุฏูู ุฑุจุท ุจููุธู
- ูุชุทูุจ ุฅูุดุงุก ููุธู ุฃููุงู

**ุงูุญู ุงูููุชุฑุญ:**
1. ุงูุณูุงุญ ุจู `User` ูุจุงุดุฑุฉ ูู `requested_by`
2. ุฃู ุฅูุดุงุก `Employee` ุชููุงุฆูุงู ููู `User`

---

### 3. ูุดุงูู ูู migrations ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

**ุงููุตู:**
- ูุง ูููู ุชุดุบูู ุงุฎุชุจุงุฑุงุช pytest ุจุดูู ุตุญูุญ
- ูุดุงูู ูู ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

**ุงูุณุจุจ:**
- ุจุนุถ ุงูู migrations ุชุณุชุฎุฏู MySQL-specific SQL
- ุนูุงูุงุช ูุนูุฏุฉ ุจูู ุงูุชุทุจููุงุช

**ุงูุญู ุงูููุชุฑุญ:**
1. ุงุณุชุฎุฏุงู `--reuse-db` ููุงุฎุชุจุงุฑุงุช
2. ุชุตุญูุญ ุงูู migrations ูุชููู database-agnostic

---

## ุงููุดุงูู ุงููุชูุณุทุฉ ๐

### 4. ุนุฏู ูุฌูุฏ validation ูููููุงุช ุงูุณุงูุจุฉ

**ุงููุตู:**
ุงููุธุงู ููุจู ุฅุฏุฎุงู ูููุงุช ุณุงูุจุฉ ูู ุจููุฏ ุงููุงุชูุฑุฉ

**ุงูุชุฃุซูุฑ:**
- ูุฏ ูุคุฏู ูุญุณุงุจุงุช ุฎุงุทุฆุฉ
- ูุดุงูู ูู ุชูุงุฑูุฑ ุงููุฎุฒูู

**ุงูุญู ุงูููุชุฑุญ:**
ุฅุถุงูุฉ validators ูู ุงููููุฐุฌ:
```python
from django.core.validators import MinValueValidator

quantity = models.DecimalField(
    validators=[MinValueValidator(Decimal('0'))]
)
```

---

### 5. ูุจูู ุฎุตู ุฃูุจุฑ ูู ุงููุฌููุน

**ุงููุตู:**
ูููู ุฅุฏุฎุงู ุฎุตู ูุจูุบ ุฃูุจุฑ ูู ุฅุฌูุงูู ุงููุงุชูุฑุฉ

**ุงูุชุฃุซูุฑ:**
- ูุฏ ููุชุฌ ูุฌููุน ุณุงูุจ
- ูุดุงูู ูุญุงุณุจูุฉ

**ุงูุญู ุงูููุชุฑุญ:**
ุฅุถุงูุฉ validation ูู `calculate_totals()`:
```python
if self.discount_amount > self.subtotal_before_discount:
    raise ValidationError('ุงูุฎุตู ุฃูุจุฑ ูู ุงููุฌููุน')
```

---

## ุงููุดุงูู ููุฎูุถุฉ ุงูุฃููููุฉ ๐ก

### 6. ุนุฏู ูุฌูุฏ ุญุฏ ุฃูุตู ููุถุฑูุจุฉ

**ุงููุตู:**
ูููู ุฅุฏุฎุงู ูุณุจุฉ ุถุฑูุจุฉ 100% ุฃู ุฃูุซุฑ

**ุงูุญู ุงูููุชุฑุญ:**
```python
tax_rate = models.DecimalField(
    validators=[
        MinValueValidator(Decimal('0')),
        MaxValueValidator(Decimal('100'))
    ]
)
```

---

### 7. ุนุฏู ุงูุชุญูู ูู ุชูุงุฑูุฎ ูุณุชูุจููุฉ

**ุงููุตู:**
ูููู ุฅูุดุงุก ููุงุชูุฑ ุจุชูุงุฑูุฎ ูุณุชูุจููุฉ ุจุนูุฏุฉ

**ุงูุญู ุงูููุชุฑุญ:**
ุฅุถุงูุฉ validation ููุชุงุฑูุฎ ูู Form ุฃู Model

---

### 8. ุฑุณุงุฆู ุงูุฎุทุฃ ุจุงูุฅูุฌููุฒูุฉ ูู ุจุนุถ ุงูุญุงูุงุช

**ุงููุตู:**
ุจุนุถ ุฑุณุงุฆู ุงูุชุญูู ุชุธูุฑ ุจุงูุฅูุฌููุฒูุฉ ุฑุบู ุฃู ุงููุงุฌูุฉ ุนุฑุจูุฉ

**ุงูุญู ุงูููุชุฑุญ:**
ุงุณุชุฎุฏุงู gettext ููุชุฑุฌูุฉ:
```python
from django.utils.translation import gettext_lazy as _
raise ValidationError(_('ุงููุงุชูุฑุฉ ุบูุฑ ูุฑุญูุฉ'))
```

---

## ุฌุฏูู ููุฎุต

| # | ุงููุดููุฉ | ุงูุฃููููุฉ | ุงูุชุฃุซูุฑ | ุงูุฌูุฏ |
|---|---------|----------|---------|-------|
| 1 | ุญูู unit ุบูุฑ ููุฌูุฏ | ๐ด ุญุฑุฌ | ุนุงูู | ููุฎูุถ |
| 2 | requested_by ูุชุทูุจ Employee | ๐ด ุญุฑุฌ | ุนุงูู | ูุชูุณุท |
| 3 | ูุดุงูู migrations | ๐ด ุญุฑุฌ | ูุชูุณุท | ุนุงูู |
| 4 | ูุง validation ููุณุงูุจ | ๐ ูุชูุณุท | ูุชูุณุท | ููุฎูุถ |
| 5 | ุฎุตู ุฃูุจุฑ ูู ุงููุฌููุน | ๐ ูุชูุณุท | ูุชูุณุท | ููุฎูุถ |
| 6 | ูุง ุญุฏ ุฃูุตู ููุถุฑูุจุฉ | ๐ก ููุฎูุถ | ููุฎูุถ | ููุฎูุถ |
| 7 | ุชูุงุฑูุฎ ูุณุชูุจููุฉ | ๐ก ููุฎูุถ | ููุฎูุถ | ููุฎูุถ |
| 8 | ุฑุณุงุฆู ุจุงูุฅูุฌููุฒูุฉ | ๐ก ููุฎูุถ | ููุฎูุถ | ููุฎูุถ |

---

## ุงูุชูุตูุงุช

### ููุฑู (ุฎูุงู ุฃุณุจูุน)
1. ุฅุตูุงุญ ุญูู `unit` ูู `PurchaseOrderItem`
2. ูุฑุงุฌุนุฉ ุนูุงูุฉ `requested_by`

### ูุตูุฑ ุงููุฏู (ุฎูุงู ุดูุฑ)
3. ุฅุถุงูุฉ validators ูููููุงุช ูุงูุฃุณุนุงุฑ
4. ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุนุฑุจูุฉ

### ุทููู ุงููุฏู
5. ูุฑุงุฌุนุฉ ุดุงููุฉ ูุฌููุน ุงูู migrations
6. ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุชููุงุฆูุฉ ูู CI/CD
