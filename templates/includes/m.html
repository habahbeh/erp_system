{# templates/includes/sidebar.html #}
{% load i18n static %}

<div class="sidebar-wrapper">
    <!-- Header -->
    <div class="sidebar-header p-3 text-center border-bottom">
        <h5 class="text-white mb-0">
            <i class="fas fa-building me-2"></i>
            {% if request.current_company %}
                {{ request.current_company.name|truncatechars:15 }}
            {% else %}
                {% trans "نظام الإدارة" %}
            {% endif %}
        </h5>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">
        <ul class="nav flex-column">

            <!-- Dashboard -->
            <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' or request.resolver_match.url_name == 'main_dashboard' %}active{% endif %}"
                   href="{% url 'core:main_dashboard' %}">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>{% trans "لوحة التحكم" %}</span>
                </a>
            </li>





            <!-- المحاسبة -->
            {% if perms.accounting.view_journalentry or perms.accounting.view_account or user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#accountingMenu"
                   aria-expanded="{% if request.resolver_match.namespace == 'accounting' %}true{% else %}false{% endif %}"
                   aria-controls="accountingMenu">
                    <i class="fas fa-calculator"></i>
                    <span>{% trans "المحاسبة" %}</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse {% if request.resolver_match.namespace == 'accounting' %}show{% endif %}" id="accountingMenu">
                    <ul class="nav flex-column ms-3">
                    <!-- 1. لوحة المحاسبة -->
                    <li class="nav-item">
    <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' and request.resolver_match.namespace == 'accounting' %}active{% endif %}"
       href="{% url 'accounting:dashboard' %}">
        <i class="fas fa-chart-line text-success"></i> {% trans "لوحة المحاسبة" %}
    </a>
</li>

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- 2. العمليات اليومية (السندات) -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">العمليات اليومية</small>
                        </li>

                        {% if perms.accounting.view_paymentvoucher or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'payment_voucher' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:payment_voucher_list' %}">
                                <i class="fas fa-arrow-down text-danger"></i> {% trans "سندات الصرف" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_receiptvoucher or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'receipt_voucher' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:receipt_voucher_list' %}">
                                <i class="fas fa-arrow-up text-success"></i> {% trans "سندات القبض" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- 3. القيود -->
                        {% if perms.accounting.add_journalentry or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'quick_journal_entry' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:quick_journal_entry' %}">
                                <i class="fas fa-bolt text-warning"></i> {% trans "قيد سريع" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_journalentry or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'journal_entry_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:journal_entry_list' %}">
                                <i class="fas fa-list text-primary"></i> {% trans "قائمة القيود" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.add_journalentry or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'journal_entry_create' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:journal_entry_create' %}">
                                <i class="fas fa-plus-circle text-success"></i> {% trans "قيد مفصل" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_journalentrytemplate or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'template' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:template_list' %}">
                                <i class="fas fa-copy text-info"></i> {% trans "قوالب القيود" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- 4. الإعداد والدليل -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الإعداد والدليل</small>
                        </li>

                        {% if perms.accounting.view_account or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'account_list' in request.resolver_match.url_name or 'account_create' in request.resolver_match.url_name or 'account_update' in request.resolver_match.url_name or 'account_detail' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_list' %}">
                                <i class="fas fa-sitemap text-info"></i> {% trans "دليل الحسابات" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_accounttype or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'account_type' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_type_list' %}">
                                <i class="fas fa-tags text-primary"></i> {% trans "أنواع الحسابات" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_costcenter or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'cost_center' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:cost_center_list' %}">
                                <i class="fas fa-building text-purple"></i> {% trans "مراكز التكلفة" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_fiscalyear or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'fiscal_year' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:fiscal_year_list' %}">
                                <i class="fas fa-calendar-alt text-warning"></i> {% trans "السنوات المالية" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_accountingperiod or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'period' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:period_list' %}">
                                <i class="fas fa-calendar-week text-secondary"></i> {% trans "الفترات المحاسبية" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- 5. التقارير المالية -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">التقارير المالية</small>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'trial_balance' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:trial_balance' %}">
                                <i class="fas fa-balance-scale text-success"></i> {% trans "ميزان المراجعة" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'general_ledger' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:general_ledger' %}">
                                <i class="fas fa-book text-info"></i> {% trans "دفتر الأستاذ" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'account_statement' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_statement' %}">
                                <i class="fas fa-file-invoice text-purple"></i> {% trans "كشف الحساب" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'income_statement' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:income_statement' %}">
                                <i class="fas fa-chart-line text-success"></i> {% trans "قائمة الدخل" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'balance_sheet' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:balance_sheet' %}">
                                <i class="fas fa-chart-pie text-secondary"></i> {% trans "الميزانية العمومية" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'account_comparison' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_comparison' %}">
                                <i class="fas fa-chart-bar text-primary"></i> {% trans "مقارنة الحسابات" %}
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            {% endif %}

            <!-- الأصول الثابتة -->

            {% if perms.assets.view_asset or user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#assetsMenu"
                   aria-expanded="{% if request.resolver_match.namespace == 'assets' %}true{% else %}false{% endif %}"
                   aria-controls="assetsMenu">
                    <i class="fas fa-desktop"></i>
                    <span>{% trans "الأصول الثابتة" %}</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse {% if request.resolver_match.namespace == 'assets' %}show{% endif %}" id="assetsMenu">
                    <ul class="nav flex-column ms-3">
                        <!-- لوحة التحكم -->
                        <li class="nav-item">
                            <a class="nav-link {% if 'dashboard' in request.resolver_match.url_name and request.resolver_match.namespace == 'assets' %}active{% endif %}"
                               href="{% url 'assets:dashboard' %}">
                                <i class="fas fa-chart-line text-success"></i> {% trans "لوحة الأصول" %}
                            </a>
                        </li>

                        <!-- الإعداد الأساسي -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الإعداد الأساسي</small>
                        </li>

                        {% if perms.assets.view_assetcategory or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'category' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:category_list' %}">
                                <i class="fas fa-sitemap text-info"></i> {% trans "تصنيفات الأصول" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_depreciationmethod or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'depreciation_method' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:depreciation_method_list' %}">
                                <i class="fas fa-chart-line text-warning"></i> {% trans "طرق الإهلاك" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_assetcondition or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'condition' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:condition_list' %}">
                                <i class="fas fa-check-circle text-success"></i> {% trans "حالات الأصول" %}
                            </a>
                        </li>
                        {% endif %}

                        <li class="nav-item">
                            <a class="nav-link {% if 'accounting_config' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:accounting_config_list' %}">
                                <i class="fas fa-cogs text-danger"></i> {% trans "إعدادات الحسابات المحاسبية" %}
                            </a>
                        </li>

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- الأصول -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">إدارة الأصول</small>
                        </li>

                        {% if perms.assets.view_asset or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'asset_list' in request.resolver_match.url_name or 'asset_detail' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:asset_list' %}">
                                <i class="fas fa-boxes text-primary"></i> {% trans "الأصول" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.add_asset or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'asset_create' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:asset_create' %}">
                                <i class="fas fa-plus-circle text-success"></i> {% trans "إضافة أصل" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_assettransaction or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'transaction' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:transaction_list' %}">
                                <i class="fas fa-exchange-alt text-info"></i> {% trans "المعاملات" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_assettransfer or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'transfer' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:transfer_list' %}">
                                <i class="fas fa-truck-moving text-warning"></i> {% trans "التحويلات" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- الإهلاك -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الإهلاك</small>
                        </li>

                        {% if perms.assets.view_assetdepreciation or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'depreciation_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:depreciation_list' %}">
                                <i class="fas fa-chart-area text-danger"></i> {% trans "قيود الإهلاك" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.add_assetdepreciation or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'bulk_calculate_depreciation' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:bulk_calculate_depreciation' %}">
                                <i class="fas fa-calculator text-warning"></i> {% trans "حساب جماعي" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- الصيانة -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الصيانة</small>
                        </li>

                        {% if perms.assets.view_assetmaintenance or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'maintenance_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:maintenance_list' %}">
                                <i class="fas fa-tools text-secondary"></i> {% trans "سجل الصيانة" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_maintenanceschedule or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'schedule_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:schedule_list' %}">
                                <i class="fas fa-calendar-alt text-info"></i> {% trans "جدولة الصيانة" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- التأمين -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">التأمين</small>
                        </li>

                        {% if perms.assets.view_assetinsurance or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'insurance_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:insurance_list' %}">
                                <i class="fas fa-shield-alt text-primary"></i> {% trans "بوليصات التأمين" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_insuranceclaim or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'claim_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:claim_list' %}">
                                <i class="fas fa-file-medical text-danger"></i> {% trans "المطالبات" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- الجرد الفعلي -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الجرد الفعلي</small>
                        </li>

                        {% if perms.assets.view_physicalcount or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'count_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:count_list' %}">
                                <i class="fas fa-clipboard-list text-info"></i> {% trans "دورات الجرد" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.add_physicalcount or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'count_create' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:count_create' %}">
                                <i class="fas fa-plus-circle text-success"></i> {% trans "إضافة جرد" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_physicalcountadjustment or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'adjustment_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:adjustment_list' %}">
                                <i class="fas fa-edit text-warning"></i> {% trans "التعديلات" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- الإيجار -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الإيجار</small>
                        </li>

                        {% if perms.assets.view_assetlease or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'lease_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:lease_list' %}">
                                <i class="fas fa-file-contract text-purple"></i> {% trans "عقود الإيجار" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- الموافقات -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الموافقات</small>
                        </li>

                        {% if perms.assets.view_approvalrequest or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'request' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:request_list' %}">
                                <i class="fas fa-clipboard-check text-success"></i> {% trans "طلبات الموافقة" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.assets.view_approvalworkflow or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'workflow_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:workflow_list' %}">
                                <i class="fas fa-project-diagram text-info"></i> {% trans "سير العمل" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- التقارير -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">التقارير</small>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'asset_register_report' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:asset_register_report' %}">
                                <i class="fas fa-file-alt text-primary"></i> {% trans "تقرير الأصول" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'depreciation_report' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:depreciation_report' %}">
                                <i class="fas fa-chart-bar text-danger"></i> {% trans "تقرير الإهلاك" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'maintenance_report' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:maintenance_report' %}">
                                <i class="fas fa-wrench text-secondary"></i> {% trans "تقرير الصيانة" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'valuation_report' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'assets:valuation_report' %}">
                                <i class="fas fa-dollar-sign text-success"></i> {% trans "تقرير التقييم" %}
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            {% endif %}



        </ul>
    </nav>

    <!-- Footer -->
    <div class="sidebar-footer p-3 mt-auto border-top">
        <div class="text-center text-white-50">
            <small>&copy; 2025 {% trans "نظام ERP" %}</small>
        </div>
    </div>
</div>

<!-- Debug Info (يمكن إزالتها في Production) -->
<div class="d-none">
    Debug Info:
    <br>Namespace: {{ request.resolver_match.namespace }}
    <br>URL Name: {{ request.resolver_match.url_name }}
    <br>Full Path: {{ request.path }}
</div>

<script>
// Coming soon function
function showComingSoon(feature) {
    Swal.fire({
        icon: 'info',
        title: '{% trans "قريباً" %}',
        text: `{% trans "وحدة" %} ${feature} {% trans "قيد التطوير وستكون متاحة قريباً" %}`,
        confirmButtonText: '{% trans "حسناً" %}',
        confirmButtonColor: '#0d6efd'
    });
}

// Debug function (يمكن إزالتها في Production)
console.log('Current namespace:', '{{ request.resolver_match.namespace }}');
console.log('Current URL name:', '{{ request.resolver_match.url_name }}');
console.log('Current path:', '{{ request.path }}');
</script>

<style>
.text-purple {
    color: #6f42c1 !important;
}

.sidebar-wrapper {
    height: 100vh;
    display: flex;
    flex-direction: column;
    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
}

.sidebar-nav {
    flex: 1;
    overflow-y: auto;
    padding: 1rem 0;
}

.nav-link {
    color: rgba(255, 255, 255, 0.8) !important;
    padding: 0.75rem 1rem;
    margin: 0.1rem 0.5rem;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    position: relative;
}

.nav-link:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
    transform: translateX(5px);
}

.nav-link.collapsed:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
}

/* للعناصر النشطة */
.nav-link.active {
    background-color: rgba(255, 255, 255, 0.25) !important;
    color: #ffffff !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border-left: 3px solid #0d6efd;
}

/* تأثير للعناصر النشطة في القوائم الفرعية */
.collapse .nav-link.active {
    background-color: rgba(13, 110, 253, 0.3) !important;
    color: #ffffff !important;
    margin-left: 1rem;
    margin-right: 0.5rem;
    border-left: 2px solid #0d6efd;
}

.nav-link i {
    width: 20px;
    margin-left: 0.5rem;
}

.sidebar-divider {
    border-color: rgba(255, 255, 255, 0.2);
    margin: 1rem 1.5rem;
}

.badge {
    font-size: 1rem;
}

/* Scrollbar */
.sidebar-nav::-webkit-scrollbar {
    width: 5px;
}

.sidebar-nav::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar-nav::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
}

/* تحسينات للتصنيفات الفرعية */
.nav-item small.text-muted {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 0.5rem;
    margin-bottom: 0.25rem;
    color: rgba(255, 255, 255, 0.5) !important;
}

/* تباعد أفضل للقوائم المتداخلة */
.collapse .nav-link {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
}

.collapse .collapse .nav-link {
    padding: 0.4rem 0.5rem;
    font-size: 0.85rem;
}

/* تأثير بصري للقوائم المفتوحة */
.collapse.show {
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 0.5rem;
    margin: 0.2rem 0.5rem;
    padding: 0.5rem 0;
}
</style>