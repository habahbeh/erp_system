{# templates/includes/sidebar.html #}
{% load i18n static %}

<div class="sidebar-wrapper">
    <!-- Header -->
    <div class="sidebar-header p-3 text-center border-bottom">
        <h5 class="text-white mb-0">
            <i class="fas fa-building me-2"></i>
            {% if request.current_company %}
                {{ request.current_company.name|truncatechars:15 }}
            {% else %}
                {% trans "نظام الإدارة" %}
            {% endif %}
        </h5>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">
        <ul class="nav flex-column">

            <!-- Dashboard -->
            <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
                   href="{% url 'core:dashboard' %}">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>{% trans "لوحة التحكم" %}</span>
                </a>
            </li>

            <!-- المحاسبة -->
            {% if perms.accounting.view_journalentry or perms.accounting.view_account or user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#accountingMenu"
                   aria-expanded="{% if request.resolver_match.namespace == 'accounting' %}true{% else %}false{% endif %}"
                   aria-controls="accountingMenu">
                    <i class="fas fa-calculator"></i>
                    <span>{% trans "المحاسبة" %}</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse {% if request.resolver_match.namespace == 'accounting' %}show{% endif %}" id="accountingMenu">
                    <ul class="nav flex-column ms-3">
                    <li class="nav-item">
    <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' and request.resolver_match.namespace == 'accounting' %}active{% endif %}"
       href="{% url 'accounting:dashboard' %}">
        <i class="fas fa-chart-line text-success"></i> {% trans "لوحة المحاسبة" %}
    </a>
</li>

                        <!-- دليل الحسابات والإعداد -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">الإعداد الأساسي</small>
                        </li>

                        {% if perms.accounting.view_accounttype or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'account_type' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_type_list' %}">
                                <i class="fas fa-tags text-primary"></i> {% trans "أنواع الحسابات" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_account or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'account_list' in request.resolver_match.url_name or 'account_create' in request.resolver_match.url_name or 'account_update' in request.resolver_match.url_name or 'account_detail' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_list' %}">
                                <i class="fas fa-sitemap text-info"></i> {% trans "دليل الحسابات" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_fiscalyear or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'fiscal_year' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:fiscal_year_list' %}">
                                <i class="fas fa-calendar-alt text-warning"></i> {% trans "السنوات المالية" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_accountingperiod or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'period' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:period_list' %}">
                                <i class="fas fa-calendar-week text-secondary"></i> {% trans "الفترات المحاسبية" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_costcenter or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'cost_center' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:cost_center_list' %}">
                                <i class="fas fa-building text-purple"></i> {% trans "مراكز التكلفة" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- القيود والعمليات -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">القيود والعمليات</small>
                        </li>

                        {% if perms.accounting.view_journalentrytemplate or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'template' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:template_list' %}">
                                <i class="fas fa-copy text-info"></i> {% trans "قوالب القيود" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.view_journalentry or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'journal_entry_list' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:journal_entry_list' %}">
                                <i class="fas fa-list text-primary"></i> {% trans "القيود اليومية" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.accounting.add_journalentry or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'quick_journal_entry' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:quick_journal_entry' %}">
                                <i class="fas fa-bolt text-warning"></i> {% trans "قيد سريع" %}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if 'journal_entry_create' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:journal_entry_create' %}">
                                <i class="fas fa-plus-circle text-success"></i> {% trans "قيد مفصل" %}
                            </a>
                        </li>
                        {% endif %}

                        <!-- السندات -->
                        {% if perms.accounting.view_paymentvoucher or perms.accounting.view_receiptvoucher or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#vouchersMenu"
                               aria-expanded="{% if 'voucher' in request.resolver_match.url_name %}true{% else %}false{% endif %}"
                               aria-controls="vouchersMenu">
                                <i class="fas fa-file-invoice-dollar"></i>
                                <span>{% trans "السندات" %}</span>
                                <i class="fas fa-chevron-down ms-auto"></i>
                            </a>
                            <div class="collapse {% if 'voucher' in request.resolver_match.url_name %}show{% endif %}" id="vouchersMenu">
                                <ul class="nav flex-column ms-3">
                                    {% if perms.accounting.view_paymentvoucher or user.is_superuser %}
                                    <li class="nav-item">
                                        <a class="nav-link {% if 'payment_voucher' in request.resolver_match.url_name %}active{% endif %}"
                                           href="{% url 'accounting:payment_voucher_list' %}">
                                            <i class="fas fa-arrow-down text-danger"></i> {% trans "سندات الصرف" %}
                                        </a>
                                    </li>
                                    {% endif %}

                                    {% if perms.accounting.view_receiptvoucher or user.is_superuser %}
                                    <li class="nav-item">
                                        <a class="nav-link {% if 'receipt_voucher' in request.resolver_match.url_name %}active{% endif %}"
                                           href="{% url 'accounting:receipt_voucher_list' %}">
                                            <i class="fas fa-arrow-up text-success"></i> {% trans "سندات القبض" %}
                                        </a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </li>
                        {% endif %}

                        <!-- فاصل -->
                        <li><hr class="dropdown-divider my-2"></li>

                        <!-- التقارير المالية -->
                        <li class="nav-item">
                            <small class="text-muted ms-3 fw-bold">التقارير المالية</small>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'trial_balance' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:trial_balance' %}">
                                <i class="fas fa-balance-scale text-success"></i> {% trans "ميزان المراجعة" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'general_ledger' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:general_ledger' %}">
                                <i class="fas fa-book text-info"></i> {% trans "دفتر الأستاذ" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'account_statement' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_statement' %}">
                                <i class="fas fa-file-invoice text-purple"></i> {% trans "كشف الحساب" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'income_statement' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:income_statement' %}">
                                <i class="fas fa-chart-line text-success"></i> {% trans "قائمة الدخل" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'balance_sheet' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:balance_sheet' %}">
                                <i class="fas fa-chart-pie text-secondary"></i> {% trans "الميزانية العمومية" %}
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link {% if 'account_comparison' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'accounting:account_comparison' %}">
                                <i class="fas fa-chart-bar text-primary"></i> {% trans "مقارنة الحسابات" %}
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            {% endif %}

            <!-- البيانات الأساسية -->
            {% if perms.core.view_businesspartner or perms.core.view_item or perms.core.view_itemcategory or perms.core.view_currency or user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#masterDataMenu"
                   aria-expanded="{% if request.resolver_match.namespace == 'core' and 'item' in request.resolver_match.url_name or 'warehouse' in request.resolver_match.url_name or 'partner' in request.resolver_match.url_name or 'brand' in request.resolver_match.url_name or 'unit' in request.resolver_match.url_name or 'currency' in request.resolver_match.url_name or 'variant_attribute' in request.resolver_match.url_name or 'category' in request.resolver_match.url_name %}true{% else %}false{% endif %}"
                   aria-controls="masterDataMenu">
                    <i class="fas fa-database"></i>
                    <span>{% trans "البيانات الأساسية" %}</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse {% if request.resolver_match.namespace == 'core' and 'item' in request.resolver_match.url_name or 'warehouse' in request.resolver_match.url_name or 'partner' in request.resolver_match.url_name or 'brand' in request.resolver_match.url_name or 'unit' in request.resolver_match.url_name or 'currency' in request.resolver_match.url_name or 'variant_attribute' in request.resolver_match.url_name or 'category' in request.resolver_match.url_name %}show{% endif %}"
                     id="masterDataMenu">
                    <ul class="nav flex-column ms-3">
                        {% if perms.core.view_item or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'item_list' in request.resolver_match.url_name or 'item_create' in request.resolver_match.url_name or 'item_update' in request.resolver_match.url_name or 'item_detail' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:item_list' %}">
                                    <i class="fas fa-boxes"></i> {% trans "المواد" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_itemcategory or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'category' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:category_list' %}">
                                    <i class="fas fa-tags"></i> {% trans "تصنيفات المواد" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_warehouse or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'warehouse' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:warehouse_list' %}">
                                    <i class="fas fa-warehouse"></i> {% trans "المستودعات" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_businesspartner or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'partner' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:partner_list' %}">
                                    <i class="fas fa-handshake"></i> {% trans "العملاء" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_brand or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'brand' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:brand_list' %}">
                                    <i class="fas fa-award"></i> {% trans "العلامات التجارية" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_unitofmeasure or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'unit' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:unit_list' %}">
                                    <i class="fas fa-ruler"></i> {% trans "وحدات القياس" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_currency or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'currency' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:currency_list' %}">
                                    <i class="fas fa-coins"></i> {% trans "العملات" %}
                                </a>
                            </li>
                        {% endif %}

                        {% if perms.core.view_variantattribute or user.is_superuser %}
                            <li class="nav-item">
                                <a class="nav-link {% if 'variant_attribute' in request.resolver_match.url_name %}active{% endif %}"
                                   href="{% url 'core:variant_attribute_list' %}">
                                    <i class="fas fa-palette"></i> {% trans "خصائص المتغيرات" %}
                                </a>
                            </li>
                        {% endif %}

                    <!-- قوائم الأسعار -->
<li class="nav-item">
    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
       data-bs-target="#pricelistsCollapse" aria-expanded="false">
        <i class="fas fa-tags"></i>
        <span>قوائم الأسعار</span>
    </a>
    <div id="pricelistsCollapse" class="collapse" data-bs-parent="#sidebarMenu">
        <ul class="nav flex-column ms-3">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'core:price_list_list' %}">
                    <i class="fas fa-list"></i> جميع القوائم
                </a>
            </li>
            {% if perms.core.add_pricelist %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'core:price_list_create' %}">
                    <i class="fas fa-plus"></i> إضافة قائمة جديدة
                </a>
            </li>
            {% endif %}
        </ul>
    </div>
</li>
                    </ul>
                </div>
            </li>
            {% endif %}

            <!-- العمليات -->
            {% if perms.purchases or perms.sales or perms.inventory or user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#operationsMenu"
                   aria-expanded="false" aria-controls="operationsMenu">
                    <i class="fas fa-cogs"></i>
                    <span>{% trans "العمليات" %}</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="operationsMenu">
                    <ul class="nav flex-column ms-3">
                        {% if perms.purchases.view_purchaseorder or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showComingSoon('المشتريات')">
                                <i class="fas fa-shopping-cart"></i> {% trans "المشتريات" %}
                                <span class="badge bg-warning ms-auto">قريباً</span>
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.sales.view_salesinvoice or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showComingSoon('المبيعات')">
                                <i class="fas fa-cash-register"></i> {% trans "المبيعات" %}
                                <span class="badge bg-warning ms-auto">قريباً</span>
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.inventory.view_stockmovement or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showComingSoon('حركة المخزون')">
                                <i class="fas fa-dolly"></i> {% trans "حركة المخزون" %}
                                <span class="badge bg-warning ms-auto">قريباً</span>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </li>
            {% endif %}

            <!-- الإدارة العامة -->
            {% if perms.core.view_user or perms.core.view_company or perms.core.view_branch or perms.core.view_custompermission or user.is_superuser %}
            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#administrationMenu"
                   aria-expanded="{% if request.resolver_match.namespace == 'core' and 'user' in request.resolver_match.url_name or 'company' in request.resolver_match.url_name or 'branch' in request.resolver_match.url_name or 'permission' in request.resolver_match.url_name or 'group' in request.resolver_match.url_name or 'profile' in request.resolver_match.url_name or 'numbering' in request.resolver_match.url_name %}true{% else %}false{% endif %}"
                   aria-controls="administrationMenu">
                    <i class="fas fa-users-cog"></i>
                    <span>{% trans "الإدارة العامة" %}</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse {% if request.resolver_match.namespace == 'core' and 'user' in request.resolver_match.url_name or 'company' in request.resolver_match.url_name or 'branch' in request.resolver_match.url_name or 'permission' in request.resolver_match.url_name or 'group' in request.resolver_match.url_name or 'profile' in request.resolver_match.url_name or 'numbering' in request.resolver_match.url_name %}show{% endif %}"
                     id="administrationMenu">
                    <ul class="nav flex-column ms-3">
                        {% if perms.core.view_company or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'company_detail' in request.resolver_match.url_name or 'company_update' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:company_detail' %}">
                                <i class="fas fa-building"></i> {% trans "بيانات الشركة" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.core.view_branch or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'branch' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:branch_list' %}">
                                <i class="fas fa-sitemap"></i> {% trans "الفروع" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.core.view_user or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'user' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:user_list' %}">
                                <i class="fas fa-users"></i> {% trans "المستخدمين" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.core.view_userprofile or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'profile' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:profile_list' %}">
                                <i class="fas fa-user-cog"></i> {% trans "ملفات المستخدمين" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.core.view_custompermission or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'permission' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:permission_list' %}">
                                <i class="fas fa-shield-alt"></i> {% trans "الصلاحيات المخصصة" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.core.view_permissiongroup or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'group' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:group_list' %}">
                                <i class="fas fa-layer-group"></i> {% trans "مجموعات الصلاحيات" %}
                            </a>
                        </li>
                        {% endif %}

                        {% if perms.core.view_numberingsequence or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'numbering' in request.resolver_match.url_name %}active{% endif %}"
                               href="{% url 'core:numbering_list' %}">
                                <i class="fas fa-sort-numeric-up"></i> {% trans "تسلسل الترقيم" %}
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </li>
            {% endif %}

            <!-- فاصل -->
            <li><hr class="sidebar-divider"></li>

            <!-- إعدادات -->
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showComingSoon('الإعدادات')">
                    <i class="fas fa-sliders-h"></i>
                    <span>{% trans "الإعدادات" %}</span>
                </a>
            </li>

            <!-- مساعدة -->
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showComingSoon('المساعدة')">
                    <i class="fas fa-question-circle"></i>
                    <span>{% trans "المساعدة" %}</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Footer -->
    <div class="sidebar-footer p-3 mt-auto border-top">
        <div class="text-center text-white-50">
            {% if request.current_company %}
            <small class="d-block"><i class="fas fa-building"></i> {{ request.current_company.name|truncatechars:20 }}</small>
            {% endif %}
            {% if request.current_branch %}
            <small class="d-block"><i class="fas fa-map-marker-alt"></i> {{ request.current_branch.name|truncatechars:20 }}</small>
            {% endif %}
            <small class="d-block mt-2">
                <i class="fas fa-code"></i> v1.0.0 -
                <span id="currentTime"></span>
            </small>
            <small>&copy; 2024 {% trans "نظام ERP" %}</small>
        </div>
    </div>
</div>

<!-- Debug Info (يمكن إزالتها في Production) -->
<div class="d-none">
    Debug Info:
    <br>Namespace: {{ request.resolver_match.namespace }}
    <br>URL Name: {{ request.resolver_match.url_name }}
    <br>Full Path: {{ request.path }}
</div>

<script>
// Update time
function updateTime() {
    const now = new Date();
    document.getElementById('currentTime').textContent = now.toLocaleTimeString('ar-EG', {
        hour: '2-digit',
        minute: '2-digit'
    });
}
setInterval(updateTime, 1000);
updateTime();

// Coming soon function
function showComingSoon(feature) {
    Swal.fire({
        icon: 'info',
        title: '{% trans "قريباً" %}',
        text: `{% trans "وحدة" %} ${feature} {% trans "قيد التطوير وستكون متاحة قريباً" %}`,
        confirmButtonText: '{% trans "حسناً" %}',
        confirmButtonColor: '#0d6efd'
    });
}

// Debug function (يمكن إزالتها في Production)
console.log('Current namespace:', '{{ request.resolver_match.namespace }}');
console.log('Current URL name:', '{{ request.resolver_match.url_name }}');
console.log('Current path:', '{{ request.path }}');
</script>

<style>
.text-purple {
    color: #6f42c1 !important;
}

.sidebar-wrapper {
    height: 100vh;
    display: flex;
    flex-direction: column;
    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
}

.sidebar-nav {
    flex: 1;
    overflow-y: auto;
    padding: 1rem 0;
}

.nav-link {
    color: rgba(255, 255, 255, 0.8) !important;
    padding: 0.75rem 1rem;
    margin: 0.1rem 0.5rem;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    position: relative;
}

.nav-link:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
    transform: translateX(5px);
}

.nav-link.collapsed:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
}

/* للعناصر النشطة */
.nav-link.active {
    background-color: rgba(255, 255, 255, 0.25) !important;
    color: #ffffff !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border-left: 3px solid #0d6efd;
}

/* تأثير للعناصر النشطة في القوائم الفرعية */
.collapse .nav-link.active {
    background-color: rgba(13, 110, 253, 0.3) !important;
    color: #ffffff !important;
    margin-left: 1rem;
    margin-right: 0.5rem;
    border-left: 2px solid #0d6efd;
}

.nav-link i {
    width: 20px;
    margin-left: 0.5rem;
}

.sidebar-divider {
    border-color: rgba(255, 255, 255, 0.2);
    margin: 1rem 1.5rem;
}

.badge {
    font-size: 1rem;
}

/* Scrollbar */
.sidebar-nav::-webkit-scrollbar {
    width: 5px;
}

.sidebar-nav::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar-nav::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
}

/* تحسينات للتصنيفات الفرعية */
.nav-item small.text-muted {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 0.5rem;
    margin-bottom: 0.25rem;
    color: rgba(255, 255, 255, 0.5) !important;
}

/* تباعد أفضل للقوائم المتداخلة */
.collapse .nav-link {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
}

.collapse .collapse .nav-link {
    padding: 0.4rem 0.5rem;
    font-size: 0.85rem;
}

/* تأثير بصري للقوائم المفتوحة */
.collapse.show {
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 0.5rem;
    margin: 0.2rem 0.5rem;
    padding: 0.5rem 0;
}
</style>