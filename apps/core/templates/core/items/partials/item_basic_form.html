{# apps/core/templates/core/items/partials/item_basic_form.html #}
{% load i18n static widget_tweaks %}

<div class="row">
    <!-- المعلومات الأساسية -->
    <div class="col-lg-8">
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h6 class="card-title mb-0">
                    <i class="fas fa-info-circle"></i> {% trans "المعلومات الأساسية" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">{% trans "رمز الصنف" %}</label>
                        {{ form.code|add_class:"form-control" }}
                        {% if form.code.errors %}
                            <div class="invalid-feedback d-block">{{ form.code.errors.0 }}</div>
                        {% endif %}
                        <small class="form-text text-muted">{% trans "سيتم توليده تلقائياً إذا ترك فارغاً" %}</small>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label required">{% trans "اسم الصنف" %}</label>
                        {{ form.name|add_class:"form-control" }}
                        {% if form.name.errors %}
                            <div class="invalid-feedback d-block">{{ form.name.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "الاسم الإنجليزي" %}</label>
                        {{ form.name_en|add_class:"form-control" }}
                        {% if form.name_en.errors %}
                            <div class="invalid-feedback d-block">{{ form.name_en.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "رقم الكتالوج" %}</label>
                        {{ form.catalog_number|add_class:"form-control" }}
                        {% if form.catalog_number.errors %}
                            <div class="invalid-feedback d-block">{{ form.catalog_number.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "الباركود" %}</label>
                        {{ form.barcode|add_class:"form-control" }}
                        {% if form.barcode.errors %}
                            <div class="invalid-feedback d-block">{{ form.barcode.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label required">{% trans "التصنيف" %}</label>
                        {{ form.category|add_class:"form-select" }}
                        {% if form.category.errors %}
                            <div class="invalid-feedback d-block">{{ form.category.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "العلامة التجارية" %}</label>
                        {{ form.brand|add_class:"form-select" }}
                        {% if form.brand.errors %}
                            <div class="invalid-feedback d-block">{{ form.brand.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label required">{% trans "وحدة القياس" %}</label>
                        {{ form.unit_of_measure|add_class:"form-select" }}
                        {% if form.unit_of_measure.errors %}
                            <div class="invalid-feedback d-block">{{ form.unit_of_measure.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- الحسابات المحاسبية -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-success text-white">
                <h6 class="card-title mb-0">
                    <i class="fas fa-calculator"></i> {% trans "الحسابات المحاسبية" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label required">{% trans "العملة" %}</label>
                        {{ form.currency|add_class:"form-select" }}
                        {% if form.currency.errors %}
                            <div class="invalid-feedback d-block">{{ form.currency.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "المستودع الافتراضي" %}</label>
                        {{ form.default_warehouse|add_class:"form-select" }}
                        {% if form.default_warehouse.errors %}
                            <div class="invalid-feedback d-block">{{ form.default_warehouse.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "حساب المبيعات" %}</label>
                        {{ form.sales_account|add_class:"form-select" }}
                        {% if form.sales_account.errors %}
                            <div class="invalid-feedback d-block">{{ form.sales_account.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "حساب المشتريات" %}</label>
                        {{ form.purchase_account|add_class:"form-select" }}
                        {% if form.purchase_account.errors %}
                            <div class="invalid-feedback d-block">{{ form.purchase_account.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "حساب المخزون" %}</label>
                        {{ form.inventory_account|add_class:"form-select" }}
                        {% if form.inventory_account.errors %}
                            <div class="invalid-feedback d-block">{{ form.inventory_account.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">{% trans "حساب تكلفة البضاعة" %}</label>
                        {{ form.cost_of_goods_account|add_class:"form-select" }}
                        {% if form.cost_of_goods_account.errors %}
                            <div class="invalid-feedback d-block">{{ form.cost_of_goods_account.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="col-md-12">
                        <label class="form-label">{% trans "نسبة الضريبة %" %}</label>
                        {{ form.tax_rate|add_class:"form-control" }}
                        {% if form.tax_rate.errors %}
                            <div class="invalid-feedback d-block">{{ form.tax_rate.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- الوصف -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-info text-white">
                <h6 class="card-title mb-0">
                    <i class="fas fa-file-alt"></i> {% trans "الوصف والتفاصيل" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label class="form-label">{% trans "وصف مختصر" %}</label>
                        {{ form.short_description|add_class:"form-control" }}
                        {% if form.short_description.errors %}
                            <div class="invalid-feedback d-block">{{ form.short_description.errors.0 }}</div>
                        {% endif %}
                        <small class="form-text text-muted">{% trans "حد أقصى 300 حرف" %}</small>
                    </div>

                    <div class="col-12">
                        <label class="form-label">{% trans "الوصف التفصيلي" %}</label>
                        {{ form.description|add_class:"form-control" }}
                        {% if form.description.errors %}
                            <div class="invalid-feedback d-block">{{ form.description.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- الشريط الجانبي -->
    <div class="col-lg-4">
        <!-- إعدادات إضافية -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-warning text-dark">
                <h6 class="card-title mb-0">
                    <i class="fas fa-cogs"></i> {% trans "إعدادات إضافية" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="form-check mb-3">
                    {{ form.has_variants|add_class:"form-check-input" }}
                    <label class="form-check-label">
                        {% trans "هذا الصنف له متغيرات" %}
                    </label>
                </div>
            </div>
        </div>

        <!-- الأبعاد -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white">
                <h6 class="card-title mb-0">
                    <i class="fas fa-ruler-combined"></i> {% trans "الأبعاد الفيزيائية" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label class="form-label">{% trans "الوزن (كغ)" %}</label>
                        {{ form.weight|add_class:"form-control" }}
                    </div>
                    <div class="col-4">
                        <label class="form-label">{% trans "الطول" %}</label>
                        {{ form.length|add_class:"form-control" }}
                    </div>
                    <div class="col-4">
                        <label class="form-label">{% trans "العرض" %}</label>
                        {{ form.width|add_class:"form-control" }}
                    </div>
                    <div class="col-4">
                        <label class="form-label">{% trans "الارتفاع" %}</label>
                        {{ form.height|add_class:"form-control" }}
                    </div>
                </div>
            </div>
        </div>

        <!-- معلومات التصنيع -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-dark text-white">
                <h6 class="card-title mb-0">
                    <i class="fas fa-industry"></i> {% trans "معلومات التصنيع" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label class="form-label">{% trans "الشركة المصنعة" %}</label>
                        {{ form.manufacturer|add_class:"form-control" }}
                    </div>
                    <div class="col-12">
                        <label class="form-label">{% trans "رقم الموديل" %}</label>
                        {{ form.model_number|add_class:"form-control" }}
                    </div>
                </div>
            </div>
        </div>

        <!-- الملفات -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-light">
                <h6 class="card-title mb-0">
                    <i class="fas fa-paperclip"></i> {% trans "الصور والمرفقات" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label class="form-label">{% trans "صورة الصنف" %}</label>
                        {{ form.image|add_class:"form-control" }}
                        {% if form.instance.image %}
                            <div class="mt-2">
                                <img src="{{ form.instance.image.url }}" class="img-thumbnail" style="max-height: 100px;">
                            </div>
                        {% endif %}
                    </div>
                    <div class="col-12">
                        <label class="form-label">{% trans "مرفق إضافي" %}</label>
                        {{ form.attachment|add_class:"form-control" }}
                    </div>
                    <div class="col-12">
                        <label class="form-label">{% trans "اسم المرفق" %}</label>
                        {{ form.attachment_name|add_class:"form-control" }}
                    </div>
                </div>
            </div>
        </div>

        <!-- ملاحظات -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-light">
                <h6 class="card-title mb-0">
                    <i class="fas fa-sticky-note"></i> {% trans "الملاحظات" %}
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label class="form-label">{% trans "ملاحظات عامة" %}</label>
                        {{ form.notes|add_class:"form-control" }}
                    </div>
                    <div class="col-12">
                        <label class="form-label">{% trans "ملاحظات إضافية" %}</label>
                        {{ form.additional_notes|add_class:"form-control" }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>