# Generated by Django 5.2.5 on 2025-10-23 16:29

import datetime
import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('accounting', '0005_alter_costcenter_cost_center_type'),
        ('assets', '0001_initial'),
        ('auth', '0012_alter_user_first_name_max_length'),
        ('core', '0009_numberingsequence_last_reset_year_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='asset',
            options={'ordering': ['-purchase_date', '-asset_number'], 'permissions': [('can_purchase_asset', 'يمكنه شراء أصول'), ('can_sell_asset', 'يمكنه بيع أصول'), ('can_transfer_asset', 'يمكنه تحويل أصول'), ('can_revalue_asset', 'يمكنه إعادة تقييم أصول'), ('can_dispose_asset', 'يمكنه استبعاد أصول'), ('can_calculate_depreciation', 'يمكنه احتساب الإهلاك'), ('can_conduct_physical_count', 'يمكنه إجراء جرد')], 'verbose_name': 'أصل ثابت', 'verbose_name_plural': 'الأصول الثابتة'},
        ),
        migrations.AddField(
            model_name='asset',
            name='actual_location',
            field=models.CharField(blank=True, help_text='الموقع الفعلي المسجل في آخر جرد', max_length=200, verbose_name='الموقع الفعلي من الجرد'),
        ),
        migrations.AddField(
            model_name='asset',
            name='depreciation_status',
            field=models.CharField(choices=[('active', 'نشط'), ('paused', 'متوقف'), ('completed', 'مكتمل')], default='active', help_text='هل الإهلاك نشط أم متوقف', max_length=20, verbose_name='حالة الإهلاك'),
        ),
        migrations.AddField(
            model_name='asset',
            name='insurance_status',
            field=models.CharField(choices=[('insured', 'مؤمّن'), ('not_insured', 'غير مؤمّن'), ('expired', 'منتهي')], default='not_insured', max_length=20, verbose_name='حالة التأمين'),
        ),
        migrations.AddField(
            model_name='asset',
            name='is_leased',
            field=models.BooleanField(default=False, help_text='هل هذا الأصل مستأجر وليس مملوك', verbose_name='أصل مستأجر'),
        ),
        migrations.AddField(
            model_name='asset',
            name='last_physical_count_date',
            field=models.DateField(blank=True, help_text='تاريخ آخر جرد تم فيه التحقق من الأصل', null=True, verbose_name='آخر جرد فعلي'),
        ),
        migrations.AddField(
            model_name='asset',
            name='location_verified_date',
            field=models.DateField(blank=True, null=True, verbose_name='تاريخ التحقق من الموقع'),
        ),
        migrations.AddField(
            model_name='assetcategory',
            name='default_physical_count_frequency',
            field=models.CharField(choices=[('monthly', 'شهري'), ('quarterly', 'ربع سنوي'), ('semi_annual', 'نصف سنوي'), ('annual', 'سنوي')], default='annual', help_text='كم مرة يجب جرد الأصول من هذه الفئة', max_length=20, verbose_name='تكرار الجرد الافتراضي'),
        ),
        migrations.AddField(
            model_name='assetcategory',
            name='gain_on_sale_account',
            field=models.ForeignKey(blank=True, help_text='حساب أرباح بيع الأصول من هذه الفئة', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_categories_gain', to='accounting.account', verbose_name='حساب ربح البيع'),
        ),
        migrations.AddField(
            model_name='assetcategory',
            name='loss_on_disposal_account',
            field=models.ForeignKey(blank=True, help_text='حساب خسائر الفقد أو التلف من الجرد', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_categories_loss', to='accounting.account', verbose_name='حساب خسارة الفقد'),
        ),
        migrations.AddField(
            model_name='assetcategory',
            name='maintenance_expense_account',
            field=models.ForeignKey(blank=True, help_text='حساب مصروفات الصيانة لهذه الفئة - اختياري', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_categories_maint_exp', to='accounting.account', verbose_name='حساب مصروف الصيانة'),
        ),
        migrations.AddField(
            model_name='assetdepreciation',
            name='is_posted',
            field=models.BooleanField(default=False, help_text='هل تم ترحيل القيد المحاسبي', verbose_name='مرحّل'),
        ),
        migrations.AddField(
            model_name='assetdepreciation',
            name='reversal_entry',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reversed_depreciations', to='accounting.journalentry', verbose_name='القيد العكسي'),
        ),
        migrations.AlterField(
            model_name='asset',
            name='status',
            field=models.CharField(choices=[('active', 'نشط'), ('inactive', 'غير نشط'), ('under_maintenance', 'تحت الصيانة'), ('disposed', 'مستبعد'), ('sold', 'مباع'), ('lost', 'مفقود'), ('damaged', 'تالف')], default='active', max_length=20, verbose_name='حالة النشاط'),
        ),
        migrations.AlterField(
            model_name='assetattachment',
            name='attachment_type',
            field=models.CharField(choices=[('invoice', 'فاتورة'), ('image', 'صورة'), ('warranty', 'ضمان'), ('contract', 'عقد'), ('maintenance', 'مستند صيانة'), ('manual', 'دليل الاستخدام'), ('insurance', 'مستند تأمين'), ('other', 'أخرى')], max_length=20, verbose_name='نوع المرفق'),
        ),
        migrations.CreateModel(
            name='ApprovalLevel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('level_order', models.IntegerField(help_text='1 = المستوى الأول، 2 = الثاني، إلخ', validators=[django.core.validators.MinValueValidator(1)], verbose_name='ترتيب المستوى')),
                ('name', models.CharField(max_length=100, verbose_name='اسم المستوى')),
                ('amount_from', models.DecimalField(blank=True, decimal_places=3, help_text='اتركه فارغاً لعدم التقييد', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='المبلغ من')),
                ('amount_to', models.DecimalField(blank=True, decimal_places=3, help_text='اتركه فارغاً لعدم التقييد', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='المبلغ إلى')),
                ('is_required', models.BooleanField(default=True, verbose_name='إجباري')),
                ('expected_response_hours', models.IntegerField(default=24, validators=[django.core.validators.MinValueValidator(1)], verbose_name='وقت الاستجابة المتوقع (ساعات)')),
                ('approver_role', models.ForeignKey(help_text='المجموعة التي يمكنها الاعتماد', on_delete=django.db.models.deletion.PROTECT, related_name='approval_levels', to='auth.group', verbose_name='دور المعتمد')),
            ],
            options={
                'verbose_name': 'مستوى موافقة',
                'verbose_name_plural': 'مستويات الموافقات',
                'ordering': ['workflow', 'level_order'],
            },
        ),
        migrations.CreateModel(
            name='ApprovalRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('request_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم الطلب')),
                ('document_type', models.CharField(max_length=50, verbose_name='نوع المستند')),
                ('document_id', models.PositiveIntegerField(verbose_name='معرف المستند')),
                ('amount', models.DecimalField(blank=True, decimal_places=3, max_digits=15, null=True, verbose_name='المبلغ')),
                ('status', models.CharField(choices=[('pending', 'معلق'), ('in_progress', 'قيد المراجعة'), ('approved', 'معتمد'), ('rejected', 'مرفوض'), ('cancelled', 'ملغي')], default='pending', max_length=20, verbose_name='الحالة')),
                ('requested_date', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الطلب')),
                ('completed_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإكمال')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('current_level', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='current_requests', to='assets.approvallevel', verbose_name='المستوى الحالي')),
                ('requested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approval_requests', to=settings.AUTH_USER_MODEL, verbose_name='طلب بواسطة')),
            ],
            options={
                'verbose_name': 'طلب موافقة',
                'verbose_name_plural': 'طلبات الموافقات',
                'ordering': ['-requested_date'],
            },
        ),
        migrations.CreateModel(
            name='ApprovalHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('created', 'تم الإنشاء'), ('approved', 'معتمد'), ('rejected', 'مرفوض'), ('cancelled', 'ملغي')], max_length=20, verbose_name='الإجراء')),
                ('action_date', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإجراء')),
                ('comments', models.TextField(blank=True, verbose_name='التعليقات')),
                ('approver', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approval_actions', to=settings.AUTH_USER_MODEL, verbose_name='المعتمد')),
                ('level', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='assets.approvallevel', verbose_name='المستوى')),
                ('approval_request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='history', to='assets.approvalrequest', verbose_name='طلب الموافقة')),
            ],
            options={
                'verbose_name': 'سجل موافقة',
                'verbose_name_plural': 'سجل الموافقات',
                'ordering': ['-action_date'],
            },
        ),
        migrations.CreateModel(
            name='ApprovalWorkflow',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('name', models.CharField(max_length=200, verbose_name='اسم سير العمل')),
                ('code', models.CharField(max_length=50, verbose_name='الرمز')),
                ('document_type', models.CharField(choices=[('asset_transaction', 'عملية أصل'), ('asset_maintenance', 'صيانة'), ('asset_transfer', 'تحويل'), ('physical_count_adjustment', 'تسوية جرد'), ('insurance_claim', 'مطالبة تأمين'), ('asset_lease', 'عقد إيجار')], max_length=50, verbose_name='نوع المستند')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('is_sequential', models.BooleanField(default=True, help_text='إذا كان نعم: موافقة تلو الأخرى، لا: كل المستويات معاً', verbose_name='تسلسلي')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
            ],
            options={
                'verbose_name': 'سير عمل موافقات',
                'verbose_name_plural': 'سير عمل الموافقات',
                'ordering': ['name'],
                'unique_together': {('company', 'code')},
            },
        ),
        migrations.AddField(
            model_name='approvalrequest',
            name='workflow',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='approval_requests', to='assets.approvalworkflow', verbose_name='سير العمل'),
        ),
        migrations.AddField(
            model_name='approvallevel',
            name='workflow',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='levels', to='assets.approvalworkflow', verbose_name='سير العمل'),
        ),
        migrations.CreateModel(
            name='AssetAccountingConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('capital_improvement_account', models.ForeignKey(blank=True, help_text='يُضاف للأصل عند التحسينات الرأسمالية', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_capital_improvement', to='accounting.account', verbose_name='حساب التحسينات الرأسمالية')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('default_bank_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_default_bank', to='accounting.account', verbose_name='حساب البنك الافتراضي')),
                ('default_cash_account', models.ForeignKey(blank=True, help_text='حساب الصندوق الافتراضي للمدفوعات', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_default_cash', to='accounting.account', verbose_name='حساب النقدية الافتراضي')),
                ('default_maintenance_expense_account', models.ForeignKey(blank=True, help_text='يُستخدم إذا لم يحدد في الفئة', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_maint_expense', to='accounting.account', verbose_name='حساب مصروف الصيانة الافتراضي')),
                ('default_supplier_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_default_supplier', to='accounting.account', verbose_name='حساب الموردين الافتراضي')),
                ('finance_lease_interest_expense_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_fin_lease_int', to='accounting.account', verbose_name='حساب مصروف فوائد الإيجار التمويلي')),
                ('finance_lease_liability_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_fin_lease_liab', to='accounting.account', verbose_name='حساب التزامات الإيجار التمويلي')),
                ('insurance_claim_income_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_insurance_income', to='accounting.account', verbose_name='حساب إيرادات تعويضات التأمين')),
                ('insurance_deductible_expense_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_insurance_deduct', to='accounting.account', verbose_name='حساب مصروف تحمل التأمين')),
                ('insurance_expense_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_insurance_exp', to='accounting.account', verbose_name='حساب مصروف التأمين')),
                ('operating_lease_expense_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='companies_op_lease_exp', to='accounting.account', verbose_name='حساب مصروف الإيجار التشغيلي')),
            ],
            options={
                'verbose_name': 'إعدادات حسابات الأصول',
                'verbose_name_plural': 'إعدادات حسابات الأصول',
            },
        ),
        migrations.CreateModel(
            name='AssetInsurance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('policy_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم البوليصة')),
                ('coverage_type', models.CharField(choices=[('comprehensive', 'شامل'), ('fire', 'حريق'), ('theft', 'سرقة'), ('damage', 'أضرار'), ('liability', 'مسؤولية'), ('custom', 'مخصص')], max_length=20, verbose_name='نوع التغطية')),
                ('coverage_description', models.TextField(blank=True, help_text='تفاصيل التغطية والاستثناءات', verbose_name='وصف التغطية')),
                ('coverage_amount', models.DecimalField(decimal_places=3, help_text='الحد الأقصى للتغطية', max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='مبلغ التغطية')),
                ('premium_amount', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='قسط التأمين')),
                ('deductible_amount', models.DecimalField(decimal_places=3, default=0, help_text='المبلغ الذي تتحمله الشركة قبل التأمين', max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='مبلغ التحمل')),
                ('payment_frequency', models.CharField(choices=[('annual', 'سنوي'), ('semi_annual', 'نصف سنوي'), ('quarterly', 'ربع سنوي'), ('monthly', 'شهري')], default='annual', max_length=20, verbose_name='دورية الدفع')),
                ('next_payment_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الدفعة القادمة')),
                ('start_date', models.DateField(verbose_name='تاريخ البداية')),
                ('end_date', models.DateField(verbose_name='تاريخ النهاية')),
                ('renewal_date', models.DateField(blank=True, help_text='تاريخ التذكير بالتجديد', null=True, verbose_name='تاريخ التجديد')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('active', 'نشط'), ('expired', 'منتهي'), ('cancelled', 'ملغي')], default='draft', max_length=20, verbose_name='الحالة')),
                ('policy_document', models.FileField(blank=True, upload_to='assets/insurance/policies/%Y/%m/', verbose_name='مستند البوليصة')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='insurances', to='assets.asset', verbose_name='الأصل')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
            ],
            options={
                'verbose_name': 'بوليصة تأمين أصل',
                'verbose_name_plural': 'بوليصات تأمين الأصول',
                'ordering': ['-start_date', '-policy_number'],
            },
        ),
        migrations.CreateModel(
            name='AssetLease',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('lease_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم العقد')),
                ('lease_type', models.CharField(choices=[('operating', 'إيجار تشغيلي'), ('finance', 'إيجار تمويلي')], help_text='تشغيلي: مصروف، تمويلي: يُضاف للأصول', max_length=20, verbose_name='نوع الإيجار')),
                ('start_date', models.DateField(verbose_name='تاريخ البداية')),
                ('end_date', models.DateField(verbose_name='تاريخ النهاية')),
                ('contract_duration_months', models.IntegerField(editable=False, verbose_name='مدة العقد (شهور)')),
                ('monthly_payment', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='القسط الشهري')),
                ('total_payments', models.DecimalField(decimal_places=3, editable=False, max_digits=15, verbose_name='إجمالي الأقساط')),
                ('security_deposit', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='التأمين')),
                ('interest_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)], verbose_name='معدل الفائدة %')),
                ('residual_value', models.DecimalField(blank=True, decimal_places=3, help_text='القيمة المتوقعة في نهاية العقد', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='القيمة المتبقية')),
                ('purchase_option_price', models.DecimalField(blank=True, decimal_places=3, help_text='السعر لشراء الأصل في نهاية العقد', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='سعر خيار الشراء')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('active', 'نشط'), ('completed', 'مكتمل'), ('terminated', 'منهي'), ('cancelled', 'ملغي')], default='draft', max_length=20, verbose_name='الحالة')),
                ('contract_file', models.FileField(blank=True, upload_to='assets/leases/%Y/%m/', verbose_name='ملف العقد')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='leases', to='assets.asset', verbose_name='الأصل')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('lessor', models.ForeignKey(limit_choices_to={'partner_type__in': ['supplier', 'both']}, on_delete=django.db.models.deletion.PROTECT, related_name='leased_assets', to='core.businesspartner', verbose_name='المؤجر')),
            ],
            options={
                'verbose_name': 'عقد استئجار أصل',
                'verbose_name_plural': 'عقود استئجار الأصول',
                'ordering': ['-start_date', '-lease_number'],
            },
        ),
        migrations.CreateModel(
            name='InsuranceClaim',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('claim_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم المطالبة')),
                ('claim_type', models.CharField(choices=[('damage', 'ضرر'), ('theft', 'سرقة'), ('fire', 'حريق'), ('accident', 'حادث'), ('natural_disaster', 'كارثة طبيعية'), ('other', 'أخرى')], max_length=20, verbose_name='نوع المطالبة')),
                ('incident_date', models.DateField(verbose_name='تاريخ الحادث')),
                ('incident_time', models.TimeField(blank=True, null=True, verbose_name='وقت الحادث')),
                ('incident_location', models.CharField(blank=True, max_length=200, verbose_name='مكان الحادث')),
                ('incident_description', models.TextField(verbose_name='وصف الحادث')),
                ('estimated_damage', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='الضرر المقدر')),
                ('claim_amount', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='مبلغ المطالبة')),
                ('approved_amount', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='المبلغ المعتمد')),
                ('deductible_applied', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='التحمل المطبق')),
                ('net_payment', models.DecimalField(decimal_places=3, default=0, editable=False, help_text='المبلغ المعتمد - التحمل', max_digits=15, verbose_name='صافي الدفع')),
                ('status', models.CharField(choices=[('filed', 'مقدم'), ('under_review', 'قيد المراجعة'), ('approved', 'معتمد'), ('rejected', 'مرفوض'), ('paid', 'مدفوع'), ('cancelled', 'ملغي')], default='filed', max_length=20, verbose_name='الحالة')),
                ('filed_date', models.DateField(auto_now_add=True, verbose_name='تاريخ التقديم')),
                ('review_date', models.DateField(blank=True, null=True, verbose_name='تاريخ المراجعة')),
                ('approval_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الاعتماد')),
                ('payment_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الدفع')),
                ('police_report', models.FileField(blank=True, help_text='إن وجد', upload_to='assets/insurance/claims/%Y/%m/police/', verbose_name='تقرير الشرطة')),
                ('damage_photos', models.FileField(blank=True, upload_to='assets/insurance/claims/%Y/%m/photos/', verbose_name='صور الضرر')),
                ('repair_estimate', models.FileField(blank=True, upload_to='assets/insurance/claims/%Y/%m/estimates/', verbose_name='تقدير الإصلاح')),
                ('other_documents', models.FileField(blank=True, upload_to='assets/insurance/claims/%Y/%m/other/', verbose_name='مستندات أخرى')),
                ('rejection_reason', models.TextField(blank=True, verbose_name='سبب الرفض')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('filed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='filed_insurance_claims', to=settings.AUTH_USER_MODEL, verbose_name='قدم بواسطة')),
                ('insurance', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='claims', to='assets.assetinsurance', verbose_name='بوليصة التأمين')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='insurance_claims', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_insurance_claims', to=settings.AUTH_USER_MODEL, verbose_name='راجع بواسطة')),
            ],
            options={
                'verbose_name': 'مطالبة تأمين',
                'verbose_name_plural': 'مطالبات التأمين',
                'ordering': ['-filed_date', '-claim_number'],
            },
        ),
        migrations.CreateModel(
            name='InsuranceCompany',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('code', models.CharField(max_length=20, verbose_name='رمز الشركة')),
                ('name', models.CharField(max_length=200, verbose_name='اسم شركة التأمين')),
                ('name_en', models.CharField(blank=True, max_length=200, verbose_name='الاسم الإنجليزي')),
                ('contact_person', models.CharField(blank=True, max_length=100, verbose_name='جهة الاتصال')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='الهاتف')),
                ('mobile', models.CharField(blank=True, max_length=20, verbose_name='الموبايل')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='البريد الإلكتروني')),
                ('fax', models.CharField(blank=True, max_length=20, verbose_name='الفاكس')),
                ('address', models.TextField(blank=True, verbose_name='العنوان')),
                ('city', models.CharField(blank=True, max_length=50, verbose_name='المدينة')),
                ('country', models.CharField(blank=True, max_length=50, verbose_name='الدولة')),
                ('website', models.URLField(blank=True, verbose_name='الموقع الإلكتروني')),
                ('license_number', models.CharField(blank=True, max_length=50, verbose_name='رقم الترخيص')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
            ],
            options={
                'verbose_name': 'شركة تأمين',
                'verbose_name_plural': 'شركات التأمين',
                'ordering': ['name'],
                'unique_together': {('company', 'code')},
            },
        ),
        migrations.AddField(
            model_name='assetinsurance',
            name='insurance_company',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='insurance_policies', to='assets.insurancecompany', verbose_name='شركة التأمين'),
        ),
        migrations.CreateModel(
            name='NotificationSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('maintenance_enabled', models.BooleanField(default=True, verbose_name='إشعارات الصيانة')),
                ('warranty_enabled', models.BooleanField(default=True, verbose_name='إشعارات الضمان')),
                ('insurance_enabled', models.BooleanField(default=True, verbose_name='إشعارات التأمين')),
                ('depreciation_enabled', models.BooleanField(default=True, verbose_name='إشعارات الإهلاك')),
                ('approval_enabled', models.BooleanField(default=True, verbose_name='إشعارات الموافقات')),
                ('physical_count_enabled', models.BooleanField(default=True, verbose_name='إشعارات الجرد')),
                ('lease_enabled', models.BooleanField(default=True, verbose_name='إشعارات الإيجار')),
                ('maintenance_days_before', models.IntegerField(default=7, verbose_name='التنبيه قبل الصيانة (أيام)')),
                ('warranty_days_before', models.IntegerField(default=30, verbose_name='التنبيه قبل انتهاء الضمان (أيام)')),
                ('insurance_days_before', models.IntegerField(default=30, verbose_name='التنبيه قبل انتهاء التأمين (أيام)')),
                ('lease_days_before', models.IntegerField(default=7, verbose_name='التنبيه قبل قسط الإيجار (أيام)')),
                ('email_enabled', models.BooleanField(default=True, verbose_name='البريد الإلكتروني')),
                ('sms_enabled', models.BooleanField(default=False, verbose_name='الرسائل النصية')),
                ('system_enabled', models.BooleanField(default=True, verbose_name='إشعارات النظام')),
                ('alternative_email', models.EmailField(blank=True, max_length=254, verbose_name='بريد إلكتروني بديل')),
                ('alternative_phone', models.CharField(blank=True, max_length=20, verbose_name='هاتف بديل')),
                ('send_summary_daily', models.BooleanField(default=False, verbose_name='ملخص يومي')),
                ('send_summary_weekly', models.BooleanField(default=True, verbose_name='ملخص أسبوعي')),
                ('preferred_time', models.TimeField(default=datetime.time(9, 0), help_text='وقت إرسال الملخصات', verbose_name='الوقت المفضل')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='asset_notification_settings', to=settings.AUTH_USER_MODEL, verbose_name='المستخدم')),
            ],
            options={
                'verbose_name': 'إعدادات إشعارات',
                'verbose_name_plural': 'إعدادات الإشعارات',
            },
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='رمز القالب')),
                ('name', models.CharField(max_length=200, verbose_name='اسم القالب')),
                ('notification_type', models.CharField(choices=[('maintenance_due', 'صيانة مستحقة'), ('warranty_expiry', 'انتهاء ضمان'), ('insurance_expiry', 'انتهاء تأمين'), ('depreciation_complete', 'إهلاك كامل'), ('approval_pending', 'موافقة معلقة'), ('asset_inactive', 'أصل معطل'), ('physical_count_due', 'جرد متأخر'), ('lease_payment_due', 'قسط إيجار مستحق')], max_length=30, verbose_name='نوع الإشعار')),
                ('notification_channel', models.CharField(choices=[('email', 'بريد إلكتروني'), ('sms', 'رسالة نصية'), ('system', 'إشعار نظام'), ('all', 'جميع القنوات')], default='system', max_length=20, verbose_name='قناة الإرسال')),
                ('subject_template', models.CharField(help_text='يمكن استخدام متغيرات مثل: {asset_name}, {date}', max_length=200, verbose_name='قالب العنوان')),
                ('body_template', models.TextField(help_text='يمكن استخدام متغيرات مثل: {asset_name}, {asset_number}, {date}, {location}', verbose_name='قالب المحتوى')),
                ('send_to_responsible', models.BooleanField(default=True, verbose_name='إرسال للمسؤول عن الأصل')),
                ('send_to_supervisor', models.BooleanField(default=False, verbose_name='إرسال للمشرف')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('additional_recipients', models.ManyToManyField(blank=True, related_name='notification_templates', to=settings.AUTH_USER_MODEL, verbose_name='مستلمون إضافيون')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
            ],
            options={
                'verbose_name': 'قالب إشعار',
                'verbose_name_plural': 'قوالب الإشعارات',
                'ordering': ['notification_type', 'name'],
            },
        ),
        migrations.CreateModel(
            name='PhysicalCountCycle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('cycle_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم الدورة')),
                ('name', models.CharField(max_length=200, verbose_name='اسم الدورة')),
                ('cycle_type', models.CharField(choices=[('monthly', 'شهري'), ('quarterly', 'ربع سنوي'), ('semi_annual', 'نصف سنوي'), ('annual', 'سنوي')], max_length=20, verbose_name='نوع الدورة')),
                ('start_date', models.DateField(verbose_name='تاريخ البداية')),
                ('end_date', models.DateField(verbose_name='تاريخ النهاية')),
                ('planned_completion_date', models.DateField(verbose_name='تاريخ الإنجاز المخطط')),
                ('status', models.CharField(choices=[('planning', 'في التخطيط'), ('in_progress', 'جارية'), ('completed', 'مكتملة'), ('cancelled', 'ملغاة')], default='planning', max_length=20, verbose_name='الحالة')),
                ('total_assets', models.IntegerField(default=0, editable=False, verbose_name='إجمالي الأصول')),
                ('counted_assets', models.IntegerField(default=0, editable=False, verbose_name='الأصول المجردة')),
                ('variance_count', models.IntegerField(default=0, editable=False, verbose_name='عدد الفروقات')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('asset_categories', models.ManyToManyField(blank=True, help_text='اتركها فارغة لتشمل جميع الفئات', related_name='physical_count_cycles', to='assets.assetcategory', verbose_name='فئات الأصول المشمولة')),
                ('branches', models.ManyToManyField(related_name='physical_count_cycles', to='core.branch', verbose_name='الفروع المشمولة')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('team_leader', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='led_count_cycles', to=settings.AUTH_USER_MODEL, verbose_name='قائد الفريق')),
                ('team_members', models.ManyToManyField(blank=True, related_name='count_cycles', to=settings.AUTH_USER_MODEL, verbose_name='أعضاء الفريق')),
            ],
            options={
                'verbose_name': 'دورة جرد',
                'verbose_name_plural': 'دورات الجرد',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='PhysicalCount',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('count_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم الجرد')),
                ('count_date', models.DateField(verbose_name='تاريخ الجرد')),
                ('location', models.CharField(blank=True, help_text='مثل: المستودع الرئيسي، الطابق الثالث', max_length=200, verbose_name='الموقع المحدد')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('in_progress', 'جاري'), ('completed', 'مكتمل'), ('approved', 'معتمد'), ('cancelled', 'ملغي')], default='draft', max_length=20, verbose_name='الحالة')),
                ('total_assets', models.IntegerField(default=0, editable=False, verbose_name='إجمالي الأصول')),
                ('counted_assets', models.IntegerField(default=0, editable=False, verbose_name='الأصول المجردة')),
                ('found_assets', models.IntegerField(default=0, editable=False, verbose_name='الأصول الموجودة')),
                ('missing_assets', models.IntegerField(default=0, editable=False, verbose_name='الأصول المفقودة')),
                ('variance_count', models.IntegerField(default=0, editable=False, verbose_name='عدد الفروقات')),
                ('approved_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الاعتماد')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_physical_counts', to=settings.AUTH_USER_MODEL, verbose_name='اعتمد بواسطة')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('responsible_team', models.ManyToManyField(related_name='physical_counts', to=settings.AUTH_USER_MODEL, verbose_name='الفريق المسؤول')),
                ('supervisor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supervised_counts', to=settings.AUTH_USER_MODEL, verbose_name='المشرف')),
                ('cycle', models.ForeignKey(blank=True, help_text='اتركها فارغة للجرد الطارئ', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='physical_counts', to='assets.physicalcountcycle', verbose_name='دورة الجرد')),
            ],
            options={
                'verbose_name': 'جرد فعلي',
                'verbose_name_plural': 'الجرد الفعلي',
                'ordering': ['-count_date', '-count_number'],
            },
        ),
        migrations.CreateModel(
            name='PhysicalCountLine',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('line_number', models.IntegerField(verbose_name='رقم السطر')),
                ('expected_location', models.CharField(max_length=200, verbose_name='الموقع المتوقع')),
                ('is_found', models.BooleanField(default=False, verbose_name='موجود')),
                ('is_counted', models.BooleanField(default=False, verbose_name='تم الجرد')),
                ('actual_location', models.CharField(blank=True, max_length=200, verbose_name='الموقع الفعلي')),
                ('has_location_variance', models.BooleanField(default=False, editable=False, verbose_name='فرق في الموقع')),
                ('has_condition_variance', models.BooleanField(default=False, editable=False, verbose_name='فرق في الحالة')),
                ('has_responsible_variance', models.BooleanField(default=False, editable=False, verbose_name='فرق في المسؤول')),
                ('counted_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ ووقت الجرد')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('photos', models.JSONField(blank=True, default=list, help_text='قائمة بروابط الصور الملتقطة أثناء الجرد', verbose_name='صور الأصل')),
                ('requires_adjustment', models.BooleanField(default=False, help_text='فقد أو تلف يحتاج قيد محاسبي', verbose_name='يحتاج تسوية')),
                ('actual_condition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='actual_in_counts', to='assets.assetcondition', verbose_name='الحالة الفعلية')),
                ('actual_responsible', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='actual_responsible_for', to=settings.AUTH_USER_MODEL, verbose_name='المسؤول الفعلي')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='physical_count_lines', to='assets.asset', verbose_name='الأصل')),
                ('counted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='counted_assets', to=settings.AUTH_USER_MODEL, verbose_name='جرد بواسطة')),
                ('expected_condition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='expected_in_counts', to='assets.assetcondition', verbose_name='الحالة المتوقعة')),
                ('expected_responsible', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='expected_responsible_for', to=settings.AUTH_USER_MODEL, verbose_name='المسؤول المتوقع')),
                ('physical_count', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lines', to='assets.physicalcount', verbose_name='الجرد')),
            ],
            options={
                'verbose_name': 'سطر جرد',
                'verbose_name_plural': 'سطور الجرد',
                'ordering': ['physical_count', 'line_number'],
                'unique_together': {('physical_count', 'line_number')},
            },
        ),
        migrations.CreateModel(
            name='PhysicalCountAdjustment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('adjustment_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم التسوية')),
                ('adjustment_type', models.CharField(choices=[('loss', 'فقد'), ('damage', 'تلف'), ('write_off', 'إعدام'), ('correction', 'تصحيح')], max_length=20, verbose_name='نوع التسوية')),
                ('adjustment_date', models.DateField(verbose_name='تاريخ التسوية')),
                ('asset_original_cost', models.DecimalField(decimal_places=3, editable=False, max_digits=15, verbose_name='التكلفة الأصلية')),
                ('accumulated_depreciation', models.DecimalField(decimal_places=3, editable=False, max_digits=15, verbose_name='الإهلاك المتراكم')),
                ('book_value', models.DecimalField(decimal_places=3, editable=False, max_digits=15, verbose_name='القيمة الدفترية')),
                ('loss_amount', models.DecimalField(decimal_places=3, default=0, help_text='القيمة الدفترية = الخسارة', max_digits=15, verbose_name='مبلغ الخسارة')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('approved', 'معتمد'), ('posted', 'مرحّل'), ('cancelled', 'ملغي')], default='draft', max_length=20, verbose_name='الحالة')),
                ('approved_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الاعتماد')),
                ('reason', models.TextField(verbose_name='السبب')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_count_adjustments', to=settings.AUTH_USER_MODEL, verbose_name='اعتمد بواسطة')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='physical_count_adjustments', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
                ('physical_count_line', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='adjustments', to='assets.physicalcountline', verbose_name='سطر الجرد')),
            ],
            options={
                'verbose_name': 'تسوية جرد',
                'verbose_name_plural': 'تسويات الجرد',
                'ordering': ['-adjustment_date', '-adjustment_number'],
            },
        ),
        migrations.AlterUniqueTogether(
            name='approvallevel',
            unique_together={('workflow', 'level_order')},
        ),
        migrations.CreateModel(
            name='LeasePayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('payment_number', models.IntegerField(verbose_name='رقم القسط')),
                ('payment_date', models.DateField(verbose_name='تاريخ الاستحقاق')),
                ('amount', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='المبلغ')),
                ('principal_amount', models.DecimalField(decimal_places=3, default=0, help_text='الجزء من الأصل', max_digits=15, verbose_name='أصل المبلغ')),
                ('interest_amount', models.DecimalField(decimal_places=3, default=0, help_text='الجزء من الفائدة', max_digits=15, verbose_name='الفائدة')),
                ('is_paid', models.BooleanField(default=False, verbose_name='مدفوع')),
                ('paid_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الدفع الفعلي')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lease_payments', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='assets.assetlease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'دفعة إيجار',
                'verbose_name_plural': 'دفعات الإيجار',
                'ordering': ['lease', 'payment_number'],
                'unique_together': {('lease', 'payment_number')},
            },
        ),
        migrations.CreateModel(
            name='AssetNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('maintenance_due', 'صيانة مستحقة'), ('warranty_expiry', 'انتهاء ضمان'), ('insurance_expiry', 'انتهاء تأمين'), ('depreciation_complete', 'إهلاك كامل'), ('approval_pending', 'موافقة معلقة'), ('asset_inactive', 'أصل معطل'), ('physical_count_due', 'جرد متأخر'), ('lease_payment_due', 'قسط إيجار مستحق')], max_length=30, verbose_name='نوع الإشعار')),
                ('subject', models.CharField(max_length=200, verbose_name='العنوان')),
                ('body', models.TextField(verbose_name='المحتوى')),
                ('priority', models.CharField(choices=[('low', 'منخفض'), ('medium', 'متوسط'), ('high', 'عالي'), ('urgent', 'عاجل')], default='medium', max_length=10, verbose_name='الأولوية')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('sent_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإرسال')),
                ('is_sent', models.BooleanField(default=False, verbose_name='تم الإرسال')),
                ('is_read', models.BooleanField(default=False, verbose_name='مقروء')),
                ('read_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ القراءة')),
                ('related_object_type', models.CharField(blank=True, help_text='مثل: maintenance, insurance, physical_count', max_length=50, verbose_name='نوع الكائن المرتبط')),
                ('related_object_id', models.PositiveIntegerField(blank=True, null=True, verbose_name='معرف الكائن المرتبط')),
                ('action_url', models.CharField(blank=True, max_length=500, verbose_name='رابط الإجراء')),
                ('asset', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='assets.asset', verbose_name='الأصل')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='asset_notifications', to=settings.AUTH_USER_MODEL, verbose_name='المستلم')),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sent_notifications', to='assets.notificationtemplate', verbose_name='القالب')),
            ],
            options={
                'verbose_name': 'إشعار أصل',
                'verbose_name_plural': 'إشعارات الأصول',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['recipient', '-created_at'], name='assets_asse_recipie_721011_idx'), models.Index(fields=['is_read', '-created_at'], name='assets_asse_is_read_8f65df_idx'), models.Index(fields=['notification_type', '-created_at'], name='assets_asse_notific_9310fa_idx')],
            },
        ),
    ]
