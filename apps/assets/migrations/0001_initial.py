# Generated by Django 5.2.5 on 2025-10-17 19:43

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('accounting', '0005_alter_costcenter_cost_center_type'),
        ('core', '0009_numberingsequence_last_reset_year_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AssetCondition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True, verbose_name='الحالة')),
                ('name_en', models.CharField(max_length=50, verbose_name='الاسم الإنجليزي')),
                ('color_code', models.CharField(default='#6c757d', help_text='مثال: #28a745 للأخضر', max_length=7, verbose_name='رمز اللون')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشطة')),
            ],
            options={
                'verbose_name': 'حالة أصل',
                'verbose_name_plural': 'حالات الأصول',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='DepreciationMethod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='الرمز')),
                ('name', models.CharField(max_length=100, verbose_name='الاسم')),
                ('name_en', models.CharField(max_length=100, verbose_name='الاسم الإنجليزي')),
                ('method_type', models.CharField(choices=[('straight_line', 'القسط الثابت - Straight Line'), ('declining_balance', 'القسط المتناقص - Declining Balance'), ('units_of_production', 'وحدات الإنتاج - Units of Production')], max_length=30, verbose_name='نوع الطريقة')),
                ('rate_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='للقسط المتناقص فقط - مثال: 200 للقسط المتناقص المضاعف', max_digits=5, null=True, verbose_name='معدل الإهلاك %')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشطة')),
            ],
            options={
                'verbose_name': 'طريقة إهلاك',
                'verbose_name_plural': 'طرق الإهلاك',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='MaintenanceType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='نوع الصيانة')),
                ('name_en', models.CharField(max_length=100, verbose_name='الاسم الإنجليزي')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='الرمز')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
            ],
            options={
                'verbose_name': 'نوع صيانة',
                'verbose_name_plural': 'أنواع الصيانة',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Asset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('asset_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم الأصل')),
                ('name', models.CharField(max_length=200, verbose_name='اسم الأصل')),
                ('name_en', models.CharField(blank=True, max_length=200, verbose_name='الاسم الإنجليزي')),
                ('status', models.CharField(choices=[('active', 'نشط'), ('inactive', 'غير نشط'), ('under_maintenance', 'تحت الصيانة'), ('disposed', 'مستبعد'), ('sold', 'مباع')], default='active', max_length=20, verbose_name='حالة النشاط')),
                ('purchase_date', models.DateField(verbose_name='تاريخ الشراء')),
                ('purchase_invoice_number', models.CharField(blank=True, max_length=50, verbose_name='رقم فاتورة الشراء')),
                ('original_cost', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='التكلفة الأصلية')),
                ('salvage_value', models.DecimalField(decimal_places=3, default=0, help_text='القيمة المتوقعة في نهاية العمر الافتراضي', max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='القيمة المتبقية (التخريدية)')),
                ('accumulated_depreciation', models.DecimalField(decimal_places=3, default=0, editable=False, max_digits=15, verbose_name='الإهلاك المتراكم')),
                ('book_value', models.DecimalField(decimal_places=3, default=0, editable=False, help_text='التكلفة الأصلية - الإهلاك المتراكم', max_digits=15, verbose_name='القيمة الدفترية')),
                ('useful_life_months', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='العمر الافتراضي (بالأشهر)')),
                ('depreciation_start_date', models.DateField(help_text='عادة هو تاريخ الشراء أو تاريخ بدء الاستخدام', verbose_name='تاريخ بدء الإهلاك')),
                ('total_expected_units', models.IntegerField(blank=True, help_text='للإهلاك بطريقة وحدات الإنتاج - مثل: كيلومترات، ساعات تشغيل', null=True, verbose_name='إجمالي الوحدات المتوقعة')),
                ('units_used', models.IntegerField(default=0, help_text='الوحدات المستخدمة حتى الآن', verbose_name='الوحدات المستخدمة')),
                ('unit_name', models.CharField(blank=True, help_text='مثال: كيلومتر، ساعة، قطعة', max_length=30, verbose_name='اسم الوحدة')),
                ('physical_location', models.CharField(blank=True, help_text='مثال: مبنى أ - طابق 3 - مكتب 305', max_length=200, verbose_name='الموقع الفعلي')),
                ('serial_number', models.CharField(blank=True, max_length=100, verbose_name='الرقم التسلسلي')),
                ('model', models.CharField(blank=True, max_length=100, verbose_name='الموديل')),
                ('manufacturer', models.CharField(blank=True, max_length=100, verbose_name='الشركة المصنعة')),
                ('warranty_start_date', models.DateField(blank=True, null=True, verbose_name='تاريخ بدء الضمان')),
                ('warranty_end_date', models.DateField(blank=True, null=True, verbose_name='تاريخ انتهاء الضمان')),
                ('warranty_provider', models.CharField(blank=True, max_length=100, verbose_name='مزود الضمان')),
                ('barcode', models.CharField(blank=True, max_length=100, null=True, unique=True, verbose_name='الباركود')),
                ('qr_code', models.TextField(blank=True, editable=False, verbose_name='QR Code')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('cost_center', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='accounting.costcenter', verbose_name='مركز التكلفة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('currency', models.ForeignKey(help_text='عملة التكلفة الأصلية', on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='core.currency', verbose_name='العملة')),
                ('responsible_employee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='responsible_for_assets', to=settings.AUTH_USER_MODEL, verbose_name='الموظف المسؤول')),
                ('supplier', models.ForeignKey(blank=True, limit_choices_to={'partner_type__in': ['supplier', 'both']}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supplied_assets', to='core.businesspartner', verbose_name='المورد')),
            ],
            options={
                'verbose_name': 'أصل ثابت',
                'verbose_name_plural': 'الأصول الثابتة',
                'ordering': ['-purchase_date', '-asset_number'],
                'permissions': [('can_purchase_asset', 'يمكنه شراء أصول'), ('can_sell_asset', 'يمكنه بيع أصول'), ('can_transfer_asset', 'يمكنه تحويل أصول'), ('can_revalue_asset', 'يمكنه إعادة تقييم أصول'), ('can_dispose_asset', 'يمكنه استبعاد أصول'), ('can_calculate_depreciation', 'يمكنه احتساب الإهلاك')],
            },
        ),
        migrations.CreateModel(
            name='AssetAttachment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='العنوان')),
                ('attachment_type', models.CharField(choices=[('invoice', 'فاتورة'), ('image', 'صورة'), ('warranty', 'ضمان'), ('contract', 'عقد'), ('maintenance', 'مستند صيانة'), ('manual', 'دليل الاستخدام'), ('other', 'أخرى')], max_length=20, verbose_name='نوع المرفق')),
                ('file', models.FileField(upload_to='assets/attachments/%Y/%m/', verbose_name='الملف')),
                ('issue_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الإصدار')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الانتهاء')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الرفع')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attachments', to='assets.asset', verbose_name='الأصل')),
                ('uploaded_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='رفع بواسطة')),
            ],
            options={
                'verbose_name': 'مرفق أصل',
                'verbose_name_plural': 'مرفقات الأصول',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='AssetCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('code', models.CharField(max_length=20, verbose_name='رمز الفئة')),
                ('name', models.CharField(max_length=100, verbose_name='اسم الفئة')),
                ('name_en', models.CharField(blank=True, max_length=100, verbose_name='الاسم الإنجليزي')),
                ('level', models.IntegerField(default=1, editable=False, verbose_name='المستوى')),
                ('default_useful_life_months', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1)], verbose_name='العمر الافتراضي الافتراضي (بالأشهر)')),
                ('default_salvage_value_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='نسبة القيمة المتبقية الافتراضية %')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('accumulated_depreciation_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_categories_acc_dep', to='accounting.account', verbose_name='حساب مجمع الإهلاك')),
                ('asset_account', models.ForeignKey(blank=True, help_text='الحساب المحاسبي للأصول من هذه الفئة', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_categories_asset', to='accounting.account', verbose_name='حساب الأصول')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('depreciation_expense_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_categories_dep_exp', to='accounting.account', verbose_name='حساب مصروف الإهلاك')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='assets.assetcategory', verbose_name='الفئة الأب')),
                ('default_depreciation_method', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='assets.depreciationmethod', verbose_name='طريقة الإهلاك الافتراضية')),
            ],
            options={
                'verbose_name': 'فئة أصول',
                'verbose_name_plural': 'فئات الأصول',
                'ordering': ['code'],
                'unique_together': {('company', 'code')},
            },
        ),
        migrations.AddField(
            model_name='asset',
            name='category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='assets.assetcategory', verbose_name='الفئة'),
        ),
        migrations.AddField(
            model_name='asset',
            name='condition',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='assets.assetcondition', verbose_name='الحالة'),
        ),
        migrations.CreateModel(
            name='AssetTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('transaction_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم العملية')),
                ('transaction_date', models.DateField(verbose_name='تاريخ العملية')),
                ('transaction_type', models.CharField(choices=[('purchase', 'شراء'), ('sale', 'بيع'), ('disposal', 'استبعاد/إتلاف'), ('revaluation', 'إعادة تقييم'), ('capital_improvement', 'تحسينات رأسمالية'), ('donation_in', 'هبة مستلمة'), ('donation_out', 'هبة معطاة')], max_length=30, verbose_name='نوع العملية')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('approved', 'معتمد'), ('completed', 'مكتمل'), ('cancelled', 'ملغي')], default='draft', max_length=20, verbose_name='الحالة')),
                ('amount', models.DecimalField(decimal_places=3, help_text='المبلغ الإجمالي للعملية', max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='المبلغ')),
                ('sale_price', models.DecimalField(blank=True, decimal_places=3, max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='سعر البيع')),
                ('book_value_at_sale', models.DecimalField(blank=True, decimal_places=3, max_digits=15, null=True, verbose_name='القيمة الدفترية عند البيع')),
                ('gain_loss', models.DecimalField(blank=True, decimal_places=3, help_text='سعر البيع - القيمة الدفترية', max_digits=15, null=True, verbose_name='الربح/الخسارة')),
                ('payment_method', models.CharField(choices=[('cash', 'نقدي'), ('bank', 'بنك'), ('credit', 'آجل'), ('other', 'أخرى')], default='cash', max_length=20, verbose_name='طريقة الدفع/التحصيل')),
                ('reference_number', models.CharField(blank=True, help_text='رقم الفاتورة أو العقد', max_length=100, verbose_name='رقم المرجع')),
                ('attachment', models.FileField(blank=True, upload_to='assets/transactions/%Y/%m/', verbose_name='المرفق')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الموافقة')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_asset_transactions', to=settings.AUTH_USER_MODEL, verbose_name='وافق عليه')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='transactions', to='assets.asset', verbose_name='الأصل')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('business_partner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_transactions', to='core.businesspartner', verbose_name='الطرف الآخر (مورد/عميل)')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_transactions', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
            ],
            options={
                'verbose_name': 'عملية على أصل',
                'verbose_name_plural': 'العمليات على الأصول',
                'ordering': ['-transaction_date', '-transaction_number'],
            },
        ),
        migrations.CreateModel(
            name='AssetTransfer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('transfer_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم التحويل')),
                ('transfer_date', models.DateField(verbose_name='تاريخ التحويل')),
                ('status', models.CharField(choices=[('pending', 'معلق'), ('approved', 'معتمد'), ('completed', 'مكتمل'), ('rejected', 'مرفوض'), ('cancelled', 'ملغي')], default='pending', max_length=20, verbose_name='الحالة')),
                ('reason', models.TextField(verbose_name='سبب التحويل')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الموافقة')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ التسليم')),
                ('received_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الاستلام')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_asset_transfers', to=settings.AUTH_USER_MODEL, verbose_name='وافق عليه')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='transfers', to='assets.asset', verbose_name='الأصل')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('delivered_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='delivered_asset_transfers', to=settings.AUTH_USER_MODEL, verbose_name='سلم بواسطة')),
                ('from_branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='asset_transfers_from', to='core.branch', verbose_name='من الفرع')),
                ('from_cost_center', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_transfers_from', to='accounting.costcenter', verbose_name='من مركز التكلفة')),
                ('from_employee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_transfers_from', to=settings.AUTH_USER_MODEL, verbose_name='من الموظف')),
                ('received_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='received_asset_transfers', to=settings.AUTH_USER_MODEL, verbose_name='استلم بواسطة')),
                ('requested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='requested_asset_transfers', to=settings.AUTH_USER_MODEL, verbose_name='طلب بواسطة')),
                ('to_branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='asset_transfers_to', to='core.branch', verbose_name='إلى الفرع')),
                ('to_cost_center', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='asset_transfers_to', to='accounting.costcenter', verbose_name='إلى مركز التكلفة')),
                ('to_employee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_transfers_to', to=settings.AUTH_USER_MODEL, verbose_name='إلى الموظف')),
            ],
            options={
                'verbose_name': 'تحويل أصل',
                'verbose_name_plural': 'تحويلات الأصول',
                'ordering': ['-transfer_date', '-transfer_number'],
            },
        ),
        migrations.CreateModel(
            name='AssetValuation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('valuation_date', models.DateField(verbose_name='تاريخ التقييم')),
                ('old_value', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='القيمة السابقة')),
                ('new_value', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='القيمة الجديدة')),
                ('difference', models.DecimalField(decimal_places=3, editable=False, max_digits=15, verbose_name='الفرق')),
                ('reason', models.TextField(verbose_name='سبب إعادة التقييم')),
                ('valuator_name', models.CharField(blank=True, max_length=100, verbose_name='اسم المقيم')),
                ('valuation_report', models.FileField(blank=True, upload_to='assets/valuations/%Y/%m/', verbose_name='تقرير التقييم')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الموافقة')),
                ('is_approved', models.BooleanField(default=False, verbose_name='موافق عليه')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_valuations', to=settings.AUTH_USER_MODEL, verbose_name='وافق عليه')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='valuations', to='assets.asset', verbose_name='الأصل')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_valuations', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_valuations', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
            ],
            options={
                'verbose_name': 'إعادة تقييم أصل',
                'verbose_name_plural': 'إعادة تقييم الأصول',
                'ordering': ['-valuation_date'],
            },
        ),
        migrations.AddField(
            model_name='asset',
            name='depreciation_method',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='assets.depreciationmethod', verbose_name='طريقة الإهلاك'),
        ),
        migrations.CreateModel(
            name='MaintenanceSchedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('schedule_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم الجدولة')),
                ('frequency', models.CharField(choices=[('daily', 'يومي'), ('weekly', 'أسبوعي'), ('monthly', 'شهري'), ('quarterly', 'ربع سنوي'), ('semi_annual', 'نصف سنوي'), ('annual', 'سنوي'), ('custom', 'مخصص')], max_length=20, verbose_name='التكرار')),
                ('custom_days', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1)], verbose_name='عدد الأيام (للتكرار المخصص)')),
                ('start_date', models.DateField(verbose_name='تاريخ البداية')),
                ('end_date', models.DateField(blank=True, help_text='اتركه فارغاً للصيانة الدائمة', null=True, verbose_name='تاريخ النهاية')),
                ('next_maintenance_date', models.DateField(editable=False, verbose_name='تاريخ الصيانة القادمة')),
                ('alert_before_days', models.IntegerField(default=7, validators=[django.core.validators.MinValueValidator(0)], verbose_name='التنبيه قبل (أيام)')),
                ('estimated_cost', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='التكلفة المتوقعة')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='maintenance_schedules', to='assets.asset', verbose_name='الأصل')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='maintenance_schedules', to=settings.AUTH_USER_MODEL, verbose_name='مسند إلى')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('maintenance_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='schedules', to='assets.maintenancetype', verbose_name='نوع الصيانة')),
            ],
            options={
                'verbose_name': 'جدولة صيانة',
                'verbose_name_plural': 'جدولة الصيانة',
                'ordering': ['next_maintenance_date'],
            },
        ),
        migrations.CreateModel(
            name='AssetMaintenance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('maintenance_number', models.CharField(editable=False, max_length=50, unique=True, verbose_name='رقم الصيانة')),
                ('maintenance_category', models.CharField(choices=[('preventive', 'وقائية'), ('corrective', 'تصحيحية'), ('emergency', 'طارئة'), ('improvement', 'تحسين')], default='preventive', max_length=20, verbose_name='تصنيف الصيانة')),
                ('scheduled_date', models.DateField(verbose_name='التاريخ المجدول')),
                ('start_date', models.DateField(blank=True, null=True, verbose_name='تاريخ البدء')),
                ('completion_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الإنجاز')),
                ('status', models.CharField(choices=[('scheduled', 'مجدولة'), ('in_progress', 'جارية'), ('completed', 'مكتملة'), ('cancelled', 'ملغاة')], default='scheduled', max_length=20, verbose_name='الحالة')),
                ('vendor_invoice_number', models.CharField(blank=True, max_length=50, verbose_name='رقم فاتورة المورد')),
                ('labor_cost', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='تكلفة العمالة')),
                ('parts_cost', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='تكلفة قطع الغيار')),
                ('other_cost', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='تكاليف أخرى')),
                ('total_cost', models.DecimalField(decimal_places=3, default=0, editable=False, max_digits=15, verbose_name='إجمالي التكلفة')),
                ('is_capital_improvement', models.BooleanField(default=False, help_text='إذا كانت نعم، ستضاف التكلفة لقيمة الأصل', verbose_name='تحسين رأسمالي')),
                ('parts_description', models.TextField(blank=True, verbose_name='وصف قطع الغيار')),
                ('description', models.TextField(verbose_name='وصف الأعمال المنفذة')),
                ('issues_found', models.TextField(blank=True, verbose_name='المشاكل المكتشفة')),
                ('recommendations', models.TextField(blank=True, verbose_name='التوصيات')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('attachment', models.FileField(blank=True, upload_to='assets/maintenance/%Y/%m/', verbose_name='مرفق')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='maintenances', to='assets.asset', verbose_name='الأصل')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.branch', verbose_name='الفرع')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('external_vendor', models.ForeignKey(blank=True, limit_choices_to={'partner_type__in': ['supplier', 'both']}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_maintenances', to='core.businesspartner', verbose_name='المورد الخارجي')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_maintenances', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
                ('performed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='performed_maintenances', to=settings.AUTH_USER_MODEL, verbose_name='نفذ بواسطة')),
                ('maintenance_schedule', models.ForeignKey(blank=True, help_text='إذا كانت الصيانة من جدول دوري', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='maintenances', to='assets.maintenanceschedule', verbose_name='الجدولة')),
                ('maintenance_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='maintenances', to='assets.maintenancetype', verbose_name='نوع الصيانة')),
            ],
            options={
                'verbose_name': 'صيانة أصل',
                'verbose_name_plural': 'صيانة الأصول',
                'ordering': ['-scheduled_date', '-maintenance_number'],
            },
        ),
        migrations.CreateModel(
            name='AssetDepreciation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التعديل')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('depreciation_date', models.DateField(verbose_name='تاريخ الإهلاك')),
                ('depreciation_amount', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='مبلغ الإهلاك')),
                ('accumulated_depreciation_before', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='الإهلاك المتراكم قبل')),
                ('accumulated_depreciation_after', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='الإهلاك المتراكم بعد')),
                ('book_value_after', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='القيمة الدفترية بعد الإهلاك')),
                ('units_used_in_period', models.IntegerField(blank=True, null=True, verbose_name='الوحدات المستخدمة في الفترة')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='depreciation_records', to='assets.asset', verbose_name='الأصل')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='الشركة')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='أنشأ بواسطة')),
                ('fiscal_year', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='accounting.fiscalyear', verbose_name='السنة المالية')),
                ('journal_entry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset_depreciations', to='accounting.journalentry', verbose_name='القيد المحاسبي')),
                ('period', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='accounting.accountingperiod', verbose_name='الفترة المحاسبية')),
            ],
            options={
                'verbose_name': 'سجل إهلاك',
                'verbose_name_plural': 'سجلات الإهلاك',
                'ordering': ['-depreciation_date'],
                'unique_together': {('asset', 'depreciation_date')},
            },
        ),
    ]
