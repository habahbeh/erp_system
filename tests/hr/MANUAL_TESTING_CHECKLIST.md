# دليل الاختبار اليدوي لوحدة الموارد البشرية
# HR Module Manual Testing Checklist

## إعداد بيانات الاختبار / Test Data Setup

### الخطوة 1: إنشاء بيانات تجريبية
```bash
python manage.py create_hr_demo_data --employees=20
```

---

## السيناريو 1: إدارة الهيكل التنظيمي / Organization Management

### 1.1 الأقسام / Departments
- [ ] إنشاء قسم جديد (IT, HR, Finance)
- [ ] تعديل معلومات قسم
- [ ] إنشاء قسم فرعي (Department → Sub-Department)
- [ ] التحقق من عرض الهيكل التنظيمي بشكل صحيح
- [ ] حذف قسم بدون موظفين
- [ ] محاولة حذف قسم به موظفين (يجب أن يفشل)

**النتيجة المتوقعة:** يجب إنشاء وإدارة الأقسام بنجاح مع عرض الهيكل الصحيح

### 1.2 الدرجات الوظيفية / Job Grades
- [ ] إنشاء درجة وظيفية (Junior, Mid, Senior)
- [ ] تحديد نطاق الراتب (Min/Max)
- [ ] تحديد أيام الإجازة السنوية والمرضية
- [ ] التحقق من عدم تداخل نطاقات الرواتب

**النتيجة المتوقعة:** يجب إدارة الدرجات الوظيفية بنجاح مع التحقق من الصحة

### 1.3 المسميات الوظيفية / Job Titles
- [ ] إنشاء مسمى وظيفي مرتبط بقسم
- [ ] ربط المسمى بدرجة وظيفية
- [ ] تحديد نطاق راتب المسمى
- [ ] التحقق من التوافق مع نطاق الدرجة الوظيفية

**النتيجة المتوقعة:** يجب إنشاء المسميات بنجاح مع التحقق من التوافق

---

## السيناريو 2: دورة حياة الموظف / Employee Lifecycle

### 2.1 تعيين موظف جديد / New Employee Hiring
- [ ] إضافة موظف جديد بجميع البيانات:
  - الاسم (عربي/إنجليزي)
  - الرقم الوطني
  - تاريخ الميلاد
  - معلومات الاتصال
  - القسم والمسمى الوظيفي
  - معلومات الراتب
  - معلومات البنك

- [ ] التحقق من:
  - توليد رقم الموظف تلقائيًا
  - حساب العمر بشكل صحيح
  - حساب معدل الساعة بشكل صحيح

**النتيجة المتوقعة:** يجب إنشاء الموظف بنجاح مع حساب جميع الحقول المحسوبة

### 2.2 إنشاء عقد العمل / Employment Contract
- [ ] إنشاء عقد عمل للموظف الجديد:
  - نوع العقد (محدد المدة/غير محدد/تجريبي)
  - تاريخ البداية والنهاية
  - راتب العقد
  - فترة التجربة
  - فترة الإشعار

- [ ] تفعيل العقد
- [ ] التحقق من حالة الموظف في فترة التجربة
- [ ] التحقق من تنبيه انتهاء العقد

**النتيجة المتوقعة:** يجب إدارة العقود بنجاح مع التنبيهات المناسبة

### 2.3 العلاوات / Salary Increments
- [ ] طلب علاوة للموظف:
  - نوع العلاوة (سنوية/ترقية/استحقاق)
  - مبلغ أو نسبة العلاوة
  - تاريخ السريان
  - السبب

- [ ] الموافقة على العلاوة
- [ ] تطبيق العلاوة على راتب الموظف
- [ ] التحقق من تحديث الراتب الأساسي

**النتيجة المتوقعة:** يجب تطبيق العلاوة بنجاح وتحديث الراتب

### 2.4 إنهاء الخدمة / Termination
- [ ] إنهاء خدمة موظف:
  - تحديد تاريخ الإنهاء
  - تحديد سبب الإنهاء
  - تحديد نوع الإنهاء

- [ ] التحقق من:
  - تغيير حالة الموظف إلى "منتهي الخدمة"
  - عدم ظهور الموظف في القوائم النشطة
  - إمكانية إعادة تفعيل الموظف

**النتيجة المتوقعة:** يجب إنهاء خدمة الموظف بنجاح مع الاحتفاظ بسجلاته

---

## السيناريو 3: إدارة الحضور / Attendance Management

### 3.1 تسجيل الحضور اليومي
- [ ] تسجيل حضور موظف:
  - وقت الدخول
  - وقت الخروج
  - حساب ساعات العمل
  - حساب دقائق التأخير

- [ ] تسجيل غياب موظف
- [ ] تسجيل إجازة موظف
- [ ] رفع ملف Excel بالحضور الجماعي

**النتيجة المتوقعة:** يجب تسجيل الحضور بنجاح مع الحسابات الصحيحة

### 3.2 البصمة / Biometric Integration
- [ ] إضافة جهاز بصمة:
  - اسم الجهاز
  - عنوان IP
  - المنفذ
  - الموقع

- [ ] ربط موظفين بالجهاز (Employee Mapping)
- [ ] اختبار الاتصال بالجهاز
- [ ] مزامنة البيانات من الجهاز
- [ ] معالجة سجلات البصمة إلى سجلات حضور

**النتيجة المتوقعة:** يجب ربط ومزامنة أجهزة البصمة بنجاح

---

## السيناريو 4: إدارة الإجازات / Leave Management

### 4.1 طلب إجازة
- [ ] إنشاء طلب إجازة:
  - نوع الإجازة (سنوية/مرضية/بدون راتب)
  - تاريخ البداية والنهاية
  - عدد الأيام (محسوب تلقائيًا)
  - السبب

- [ ] التحقق من:
  - خصم الأيام من الرصيد المتاح
  - عدم السماح بطلب أكثر من الرصيد
  - التحقق من الفترات المتداخلة

**النتيجة المتوقعة:** يجب إنشاء طلب الإجازة مع التحقق الصحيح

### 4.2 الموافقة على الإجازات
- [ ] الموافقة على طلب إجازة
- [ ] رفض طلب إجازة مع توضيح السبب
- [ ] إلغاء إجازة معتمدة
- [ ] التحقق من تحديث رصيد الإجازات

**النتيجة المتوقعة:** يجب إدارة دورة الموافقات بنجاح

### 4.3 إدارة أرصدة الإجازات
- [ ] تهيئة أرصدة الإجازات السنوية
- [ ] ترحيل أيام الإجازة من العام السابق
- [ ] إضافة/خصم أيام تعديل
- [ ] عرض تقرير أرصدة الإجازات

**النتيجة المتوقعة:** يجب إدارة الأرصدة بدقة

---

## السيناريو 5: إدارة العمل الإضافي / Overtime Management

### 5.1 تسجيل العمل الإضافي
- [ ] تسجيل ساعات عمل إضافي:
  - التاريخ
  - وقت البداية والنهاية
  - عدد الساعات
  - نوع العمل (عادي/عطلة/نهاية أسبوع)
  - حساب المبلغ تلقائيًا

- [ ] التحقق من حساب المعدلات (1.25x, 2.0x)

**النتيجة المتوقعة:** يجب حساب العمل الإضافي بدقة

### 5.2 الموافقة على العمل الإضافي
- [ ] الموافقة على طلب عمل إضافي
- [ ] رفض طلب عمل إضافي
- [ ] تحديد حالة "مدفوع" بعد الموافقة

**النتيجة المتوقعة:** يجب إدارة دورة الموافقات بنجاح

---

## السيناريو 6: إدارة السلف / Advances Management

### 6.1 طلب سلفة
- [ ] إنشاء طلب سلفة:
  - نوع السلفة (سلفة راتب/قرض/طارئة)
  - المبلغ
  - عدد الأقساط
  - تاريخ بدء الاستقطاع
  - حساب قيمة القسط تلقائيًا

- [ ] التحقق من:
  - عدم تجاوز النسبة المسموحة من الراتب
  - عدم تجاوز الحد الأقصى للأقساط

**النتيجة المتوقعة:** يجب التحقق من شروط السلفة

### 6.2 الموافقة والصرف
- [ ] الموافقة على السلفة
- [ ] صرف السلفة
- [ ] إنشاء جدول الأقساط تلقائيًا
- [ ] التحقق من قيد اليومية المحاسبي (إن كان مفعلًا)

**النتيجة المتوقعة:** يجب صرف السلفة وإنشاء الأقساط

### 6.3 استقطاع الأقساط
- [ ] عرض جدول الأقساط المستحقة
- [ ] استقطاع قسط من الراتب
- [ ] التحقق من تحديث المبلغ المدفوع والمتبقي
- [ ] التحقق من حالة "مسددة بالكامل" عند الانتهاء

**النتيجة المتوقعة:** يجب تتبع الاستقطاعات بدقة

---

## السيناريو 7: معالجة الرواتب / Payroll Processing

### 7.1 إنشاء كشف رواتب شهري
- [ ] إنشاء كشف رواتب جديد:
  - الفترة (الشهر/السنة)
  - الفرع
  - تاريخ البداية والنهاية

- [ ] إضافة الموظفين للكشف
- [ ] حساب مكونات الراتب:
  - الراتب الأساسي
  - بدل الوقود
  - البدلات الأخرى
  - العمل الإضافي
  - الخصومات (الضمان الاجتماعي، السلف)

**النتيجة المتوقعة:** يجب حساب جميع المكونات بدقة

### 7.2 المعالجة والموافقة
- [ ] معالجة الكشف (حساب جميع السطور)
- [ ] مراجعة الكشف
- [ ] الموافقة على الكشف
- [ ] التحقق من إنشاء قيود اليومية (إن كان مفعلًا):
  - قيد المصروفات (الرواتب والبدلات)
  - قيد المطلوبات (صافي الرواتب)
  - قيد الضمان الاجتماعي

**النتيجة المتوقعة:** يجب الموافقة على الكشف وإنشاء القيود

### 7.3 الدفع
- [ ] تحديد الكشف كـ "مدفوع"
- [ ] طباعة قسائم الرواتب (Payslips)
- [ ] التحقق من تصدير ملف Excel

**النتيجة المتوقعة:** يجب إتمام عملية الدفع بنجاح

---

## السيناريو 8: بوابة الخدمة الذاتية / Employee Self-Service

### 8.1 لوحة تحكم الموظف
- [ ] تسجيل الدخول كموظف
- [ ] عرض:
  - معلومات الملف الشخصي
  - رصيد الإجازات
  - سجل الحضور
  - قسائم الرواتب

**النتيجة المتوقعة:** يجب عرض جميع معلومات الموظف

### 8.2 طلبات الموظف
- [ ] تقديم طلب إجازة
- [ ] عرض حالة الطلبات
- [ ] عرض قسائم الرواتب السابقة
- [ ] تحديث معلومات الملف الشخصي

**النتيجة المتوقعة:** يجب السماح للموظف بالعمليات المصرح بها فقط

---

## السيناريو 9: التقارير / Reports

### 9.1 تقرير الموظفين
- [ ] عرض تقرير الموظفين:
  - حسب القسم
  - حسب الحالة (نشط/منتهي)
  - حسب نوع التوظيف
- [ ] تصدير إلى Excel

**النتيجة المتوقعة:** يجب عرض التقرير بدقة

### 9.2 تقرير الحضور
- [ ] عرض تقرير الحضور:
  - حسب الفترة
  - حسب الموظف/القسم
  - إحصائيات (حاضر/غائب/متأخر)
- [ ] تصدير إلى Excel

**النتيجة المتوقعة:** يجب حساب الإحصائيات بدقة

### 9.3 تقرير الإجازات
- [ ] عرض تقرير الإجازات:
  - الإجازات المعتمدة
  - الإجازات المعلقة
  - أرصدة الإجازات
- [ ] تصدير إلى Excel

**النتيجة المتوقعة:** يجب عرض جميع بيانات الإجازات

### 9.4 تقرير الرواتب
- [ ] عرض ملخص الرواتب:
  - إجمالي الرواتب الأساسية
  - إجمالي البدلات
  - إجمالي الخصومات
  - إجمالي الصافي
- [ ] التحليل حسب القسم
- [ ] تصدير إلى Excel

**النتيجة المتوقعة:** يجب حساب الإجماليات بدقة

---

## السيناريو 10: اختبار عزل البيانات بين الشركات / Multi-Company Isolation

### 10.1 التحقق من العزل
- [ ] إنشاء شركة ثانية
- [ ] إضافة موظفين لكل شركة
- [ ] تسجيل الدخول كمستخدم من الشركة الأولى
- [ ] التحقق من:
  - عدم ظهور موظفي الشركة الثانية
  - عدم ظهور أقسام الشركة الثانية
  - عدم ظهور إجازات الشركة الثانية
  - عدم ظهور رواتب الشركة الثانية

**النتيجة المتوقعة:** يجب أن يكون العزل كاملًا بين الشركات

### 10.2 التبديل بين الشركات (للمستخدم الرئيسي)
- [ ] تسجيل الدخول كمستخدم رئيسي (Superuser)
- [ ] التبديل إلى الشركة الأولى
- [ ] عرض البيانات (يجب رؤية بيانات الشركة الأولى فقط)
- [ ] التبديل إلى الشركة الثانية
- [ ] عرض البيانات (يجب رؤية بيانات الشركة الثانية فقط)

**النتيجة المتوقعة:** يجب التبديل بنجاح مع عرض البيانات الصحيحة

---

## السيناريو 11: تقييم الأداء / Performance Evaluation

### 11.1 إنشاء فترة تقييم
- [ ] إنشاء فترة تقييم (سنوية/نصف سنوية/ربع سنوية)
- [ ] تحديد معايير التقييم
- [ ] تفعيل الفترة

### 11.2 إجراء التقييمات
- [ ] التقييم الذاتي للموظف
- [ ] تقييم المدير
- [ ] الموافقة النهائية
- [ ] عرض نتائج التقييم

**النتيجة المتوقعة:** يجب إدارة دورة التقييم بنجاح

---

## السيناريو 12: التدريب / Training Management

### 12.1 إدارة الدورات التدريبية
- [ ] إنشاء فئة تدريب
- [ ] إنشاء مزود تدريب
- [ ] إنشاء دورة تدريبية
- [ ] تسجيل موظفين في الدورة

### 12.2 تتبع التدريب
- [ ] تحديث حالة التدريب
- [ ] جمع التغذية الراجعة
- [ ] عرض تقرير التدريب

**النتيجة المتوقعة:** يجب تتبع جميع أنشطة التدريب

---

## السيناريو 13: الإشعارات / Notifications

### 13.1 التحقق من الإشعارات التلقائية
- [ ] إنشاء عقد قارب على الانتهاء (خلال 30 يوم)
- [ ] التحقق من إرسال إشعار انتهاء العقد
- [ ] رصيد إجازة منخفض (أقل من 5 أيام)
- [ ] التحقق من إرسال إشعار رصيد منخفض
- [ ] قسط سلفة متأخر
- [ ] التحقق من إرسال إشعار تأخير

**النتيجة المتوقعة:** يجب إرسال جميع الإشعارات في الوقت المناسب

### 13.2 إعدادات الإشعارات
- [ ] تفعيل/تعطيل أنواع الإشعارات
- [ ] تحديد عتبات الإشعارات
- [ ] تفعيل إشعارات البريد الإلكتروني

**النتيجة المتوقعة:** يجب تطبيق الإعدادات بنجاح

---

## السيناريو 14: التكامل المحاسبي / Accounting Integration

### 14.1 إعداد ربط الحسابات
- [ ] ربط مكونات الراتب بحسابات المصروفات:
  - حساب الرواتب الأساسية
  - حساب بدل الوقود
  - حساب البدلات الأخرى
  - حساب العمل الإضافي
  - حساب الضمان الاجتماعي (الشركة)

- [ ] ربط الخصومات بحسابات المطلوبات:
  - حساب صافي الرواتب المستحقة
  - حساب الضمان الاجتماعي (الموظف)
  - حساب استقطاعات السلف

**النتيجة المتوقعة:** يجب ربط جميع الحسابات بنجاح

### 14.2 التحقق من القيود المحاسبية
- [ ] معالجة كشف رواتب
- [ ] التحقق من إنشاء قيد اليومية تلقائيًا
- [ ] التحقق من أرصدة الحسابات:
  - مدين: حسابات المصروفات
  - دائن: حسابات المطلوبات
- [ ] التحقق من توازن القيد (المدين = الدائن)

**النتيجة المتوقعة:** يجب إنشاء القيود بدقة ومتوازنة

### 14.3 قيود صرف السلف
- [ ] صرف سلفة لموظف
- [ ] التحقق من إنشاء قيد الصرف:
  - مدين: حساب السلف (أصل متداول)
  - دائن: حساب الصندوق/البنك

**النتيجة المتوقعة:** يجب تسجيل الصرف محاسبيًا

---

## ملاحظات عامة للاختبار / General Testing Notes

### 1. الأداء / Performance
- [ ] اختبار أداء القوائم مع 100+ موظف
- [ ] اختبار أداء معالجة الرواتب لـ 50+ موظف
- [ ] اختبار أداء تقارير الحضور لشهر كامل

### 2. الأمان / Security
- [ ] التحقق من الصلاحيات (عدم السماح لمستخدم عادي بحذف بيانات)
- [ ] التحقق من عزل البيانات بين الفروع
- [ ] التحقق من عدم إمكانية الوصول لبيانات شركات أخرى

### 3. التحقق من الصحة / Validation
- [ ] التحقق من عدم السماح بإدخال راتب سالب
- [ ] التحقق من عدم السماح بإجازة أكثر من الرصيد
- [ ] التحقق من عدم السماح بتواريخ غير منطقية

### 4. واجهة المستخدم / User Interface
- [ ] اختبار الواجهة على متصفحات مختلفة
- [ ] اختبار الواجهة على أحجام شاشة مختلفة
- [ ] التحقق من دعم اللغة العربية (RTL)
- [ ] التحقق من وضوح الرسائل والأخطاء

---

## سجل الاختبار / Test Log

| التاريخ / Date | السيناريو / Scenario | الحالة / Status | الملاحظات / Notes | المختبر / Tester |
|---------------|---------------------|----------------|------------------|------------------|
|               |                     |                |                  |                  |
|               |                     |                |                  |                  |
|               |                     |                |                  |                  |

---

## المشاكل المكتشفة / Issues Found

| # | الوصف / Description | الخطورة / Severity | الحالة / Status | تاريخ الإصلاح / Fix Date |
|---|--------------------|--------------------|----------------|------------------------|
|   |                    |                    |                |                        |
|   |                    |                    |                |                        |
|   |                    |                    |                |                        |

---

## الخلاصة / Summary

### معدل النجاح / Success Rate
- إجمالي السيناريوهات: ___
- السيناريوهات الناجحة: ___
- السيناريوهات الفاشلة: ___
- النسبة المئوية: ___%

### التوصيات / Recommendations
1. _______________________________
2. _______________________________
3. _______________________________

### التوقيع / Sign-off
- المختبر / Tester: _______________
- التاريخ / Date: _______________
- مدير المشروع / PM: _______________
- التاريخ / Date: _______________
